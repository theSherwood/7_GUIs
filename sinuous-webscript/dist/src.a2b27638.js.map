{"version":3,"sources":["../observable/src/observable.js","../observable/src/utils.js","../htm/src/build.js","../htm/src/index.js","../h/src/api.js","../h/src/constants.js","../h/src/add.js","../h/src/frag.js","../h/src/cast-node.js","../h/src/remove-nodes.js","../h/src/property.js","../h/src/h.js","../src/index.js","../h/src/index.js","../h/src/insert.js","../src/webscript.js","src/elements.js","src/components/card.js","src/tasks/counter.js","src/tasks/temperatureConverter.js","src/tasks/flightBooker.js","src/tasks/timer.js","src/tasks/crud.js","src/tasks/circleDrawer.js","src/tasks/cells/sampleData.js","src/tasks/cells/parse.js","src/tasks/cells/cells.js","src/app.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["EMPTY_ARR","tracking","queue","isListening","root","fn","prevTracking","rootUpdate","resetUpdate","result","_unsubscribe","undefined","sample","value","transaction","prevQueue","q","forEach","data","_pending","pending","observable","nextValue","arguments","length","_observers","has","add","_observables","push","clearedUpdate","_runObservers","Set","observer","_fresh","$o","computed","update","_children","prevChildren","u","indexOf","getChildrenDeep","children","reduce","res","curr","concat","removeFreshChildren","o","_update","delete","cleanup","_cleanups","subscribe","on","obs","seed","onchanges","unsubscribe","c","evaluate","h","built","fields","args","propBody","i","field","type","Object","assign","key","prev","parts","prop","j","call","this","apply","build","statics","char","propName","mode","buffer","quote","current","commit","replace","CACHES","Map","regular","tmp","get","set","custom","Array","isArray","bind","wrap","api","parent","endMark","fragOrNode","childNodes","nodeType","t","document","createTextNode","Node","insertBefore","parentNode","removeNodes","startNode","n","nextSibling","removeChild","eventProxy","e","_listeners","context","options","isSvg","from","el","item","arg","createElementNS","createElement","createDocumentFragment","property","insert","splice","hs","html","htm","svg","_startMark","previousSibling","textContent","firstChild","lastChild","name","isAttr","isCss","style","setProperty","slice","setAttribute","cssText","toLowerCase","addEventListener","removeEventListener","rm","templateValues","strings","templateArgs","entries","index","s","interpunct","RegExp","createInitialBuilder","constructor","setPropertyValue","__element_info__","props","createBuilder","isFrozen","join","setPropsValues","propsInfo","builder","Proxy","target","thisArg","exec","first","endsWith","types","Error","builders","main","a","button","progress","span","section","h2","div","input","select","option","p","table","thead","tbody","tr","td","circle","frag","fragment","DocumentFragment","elements","element","append","card","title","class","counter","count","onclick","trunc","Number","toFixed","remove0","test","getC","f","getF","r","isValid","temp","temperatureConverter","updateFromC","updateFromF","to","oninput","flightMap","tryAsDate","dateString","dateArr","split","reverse","date","Date","valueOf","formatAsString","toISOString","flightBooker","flightType","startDate","returnDate","error1","error2","error3","isBookButtonDisabled","isOneWay","startDateClass","returnDateClass","book","timeStrings","alert","onchange","disabled","timer","MAX","duration","durationFormatted","start","time","interval","createInterval","setInterval","startTimer","clearInterval","min","max","crud","prefix","filteredEntries","map","entry","filter","startsWith","surname","selected","createHandler","updateHandler","deleteHandler","size","circleDrawer","BASE_RADIUS","step","snapshots","radius","resizing","present","resizingIndex","findIndex","x","y","newPresent","handleRightClick","preventDefault","stopPropagation","cx","baseVal","cy","addCircle","layerX","layerY","newSnapshot","addSnapshot","newSnapshots","undo","Math","redo","endResize","overlay","circleSVG","fill","stroke","oncontextmenu","view","sampleData","A0","A1","A2","A3","B1","B2","A5","B5","A6","B6","A7","B7","A8","B8","A9","B9","A10","B10","C0","D0","C1","D1","C2","D2","C3","D3","C4","D4","C5","D5","C7","D7","C8","D8","C9","D9","C10","D10","C11","D11","C12","D12","C14","D14","C15","D15","Parser","store","columns","rows","cells","operations","sum","b","sub","mul","mod","exp","letters","numbers","letter","number","arr","end","startI","endI","rangeStart","rangeEnd","splitOperand","findArrRange","cartesianProduct","operand","match","op","isWellFormed","originalString","range","getRange","address","parse","operand1","operand2","parseOperand","second","toString","isNaN","formula","operationType","formulaArr","includes","singleOperation","rangeOperation","str","parseOperation","toUpperCase","LETTERS","keys","letterRange","getNumberAsLetters","getBase26","remainder","floor","num","findAdjacent","direction","shape","focused","tBody","createNewCell","dataRef","handleFocus","setTimeout","setSelectionRange","handleBlur","handleInput","handleKeydown","column","row","selector","newRow","altKey","newColumn","querySelector","focus","clear","id","onfocus","onblur","onkeydown","app","href","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","getBaseURL","url","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","now","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","createErrorOverlay","body","appendChild","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["import { getChildrenDeep } from './utils.js';\n\nconst EMPTY_ARR = [];\nlet tracking;\nlet queue;\n\n/**\n * Returns true if there is an active observer.\n * @return {boolean}\n */\nexport function isListening() {\n  return !!tracking;\n}\n\n/**\n * Creates a root and executes the passed function that can contain computations.\n * The executed function receives an `unsubscribe` argument which can be called to\n * unsubscribe all inner computations.\n *\n * @param  {Function} fn\n * @return {*}\n */\nexport function root(fn) {\n  const prevTracking = tracking;\n  const rootUpdate = () => {};\n  tracking = rootUpdate;\n  resetUpdate(rootUpdate);\n  const result = fn(() => {\n    _unsubscribe(rootUpdate);\n    tracking = undefined;\n  });\n  tracking = prevTracking;\n  return result;\n}\n\n/**\n * Sample the current value of an observable but don't create a dependency on it.\n *\n * @example\n * computed(() => { if (foo()) bar(sample(bar) + 1); });\n *\n * @param  {Function} fn\n * @return {*}\n */\nexport function sample(fn) {\n  const prevTracking = tracking;\n  tracking = undefined;\n  const value = fn();\n  tracking = prevTracking;\n  return value;\n}\n\n/**\n * Creates a transaction in which an observable can be set multiple times\n * but only trigger a computation once.\n * @param  {Function} fn\n * @return {*}\n */\nexport function transaction(fn) {\n  let prevQueue = queue;\n  queue = [];\n  const result = fn();\n  let q = queue;\n  queue = prevQueue;\n  q.forEach(data => {\n    if (data._pending !== EMPTY_ARR) {\n      const pending = data._pending;\n      data._pending = EMPTY_ARR;\n      data(pending);\n    }\n  });\n  return result;\n}\n\n/**\n * Creates a new observable, returns a function which can be used to get\n * the observable's value by calling the function without any arguments\n * and set the value by passing one argument of any type.\n *\n * @param  {*} value - Initial value.\n * @return {Function}\n */\nfunction observable(value) {\n  function data(nextValue) {\n    if (arguments.length === 0) {\n      if (tracking && !data._observers.has(tracking)) {\n        data._observers.add(tracking);\n        tracking._observables.push(data);\n      }\n      return value;\n    }\n\n    if (queue) {\n      if (data._pending === EMPTY_ARR) {\n        queue.push(data);\n      }\n      data._pending = nextValue;\n      return nextValue;\n    }\n\n    value = nextValue;\n\n    // Clear `tracking` otherwise a computed triggered by a set\n    // in another computed is seen as a child of that other computed.\n    const clearedUpdate = tracking;\n    tracking = undefined;\n\n    // Update can alter data._observers, make a copy before running.\n    data._runObservers = new Set(data._observers);\n    data._runObservers.forEach(observer => (observer._fresh = false));\n    data._runObservers.forEach(observer => {\n      if (!observer._fresh) observer();\n    });\n\n    tracking = clearedUpdate;\n    return value;\n  }\n\n  // Tiny indicator that this is an observable function.\n  data.$o = true;\n  data._observers = new Set();\n  // The 'not set' value must be unique, so `nullish` can be set in a transaction.\n  data._pending = EMPTY_ARR;\n\n  return data;\n}\n\n/**\n * @namespace\n * @borrows observable as o\n */\nexport { observable, observable as o };\n\n/**\n * Creates a new computation which runs when defined and automatically re-runs\n * when any of the used observable's values are set.\n *\n * @param {Function} observer\n * @param {*} value - Seed value.\n * @return {Function} Computation which can be used in other computations.\n */\nfunction computed(observer, value) {\n  observer._update = update;\n\n  // if (tracking == null) {\n  //   console.warn(\"computations created without a root or parent will never be disposed\");\n  // }\n\n  resetUpdate(update);\n  update();\n\n  function update() {\n    const prevTracking = tracking;\n    if (tracking) {\n      tracking._children.push(update);\n    }\n\n    const prevChildren = update._children;\n\n    _unsubscribe(update);\n    update._fresh = true;\n    tracking = update;\n    value = observer(value);\n\n    // If any children computations were removed mark them as fresh.\n    // Check the diff of the children list between pre and post update.\n    prevChildren.forEach(u => {\n      if (update._children.indexOf(u) === -1) {\n        u._fresh = true;\n      }\n    });\n\n    // If any children were marked as fresh remove them from the run lists.\n    const allChildren = getChildrenDeep(update._children);\n    allChildren.forEach(removeFreshChildren);\n\n    tracking = prevTracking;\n    return value;\n  }\n\n  // Tiny indicator that this is an observable function.\n  data.$o = true;\n\n  function data() {\n    if (update._fresh) {\n      update._observables.forEach(o => o());\n    } else {\n      value = update();\n    }\n    return value;\n  }\n\n  return data;\n}\n\nfunction removeFreshChildren(u) {\n  if (u._fresh) {\n    u._observables.forEach(o => {\n      if (o._runObservers) {\n        o._runObservers.delete(u);\n      }\n    });\n  }\n}\n\n/**\n * @namespace\n * @borrows computed as S\n */\nexport { computed, computed as S };\n\n/**\n * Run the given function just before the enclosing computation updates\n * or is disposed.\n * @param  {Function} fn\n * @return {Function}\n */\nexport function cleanup(fn) {\n  if (tracking) {\n    tracking._cleanups.push(fn);\n  }\n  return fn;\n}\n\n/**\n * Subscribe to updates of an observable.\n * @param  {Function} observer\n * @return {Function}\n */\nexport function subscribe(observer) {\n  computed(observer);\n  return () => _unsubscribe(observer._update);\n}\n\n/**\n * Statically declare a computation's dependencies.\n *\n * @param  {Function|Array}   obs\n * @param  {Function} fn - Callback function.\n * @param  {*} [seed] - Seed value.\n * @param  {boolean} [onchanges] - If true the initial run is skipped.\n * @return {Function} Computation which can be used in other computations.\n */\nexport function on(obs, fn, seed, onchanges) {\n  obs = [].concat(obs);\n  return computed((value) => {\n    obs.forEach((o) => o());\n\n    let result = value;\n    if (!onchanges) {\n      result = sample(() => fn(value));\n    }\n\n    onchanges = false;\n    return result;\n  }, seed);\n}\n\n/**\n * Unsubscribe from an observer.\n * @param  {Function} observer\n */\nexport function unsubscribe(observer) {\n  _unsubscribe(observer._update);\n}\n\nfunction _unsubscribe(update) {\n  update._children.forEach(_unsubscribe);\n  update._observables.forEach(o => {\n    o._observers.delete(update);\n    if (o._runObservers) {\n      o._runObservers.delete(update);\n    }\n  });\n  update._cleanups.forEach(c => c());\n  resetUpdate(update);\n}\n\nfunction resetUpdate(update) {\n  // Keep track of which observables trigger updates. Needed for unsubscribe.\n  update._observables = [];\n  update._children = [];\n  update._cleanups = [];\n}\n","export function getChildrenDeep(children) {\n  return children.reduce(\n    (res, curr) => res.concat(curr, getChildrenDeep(curr._children)),\n    []\n  );\n}\n","import { MINI } from './constants.js';\n\nconst MODE_SLASH = 0;\nconst MODE_TEXT = 1;\nconst MODE_WHITESPACE = 2;\nconst MODE_TAGNAME = 3;\nconst MODE_COMMENT = 4;\nconst MODE_PROP_SET = 5;\nconst MODE_PROP_APPEND = 6;\n\nconst TAG_SET = 1;\nconst CHILD_APPEND = 0;\nconst CHILD_RECURSE = 2;\nconst PROPS_ASSIGN = 3;\nconst PROP_SET = MODE_PROP_SET;\nconst PROP_APPEND = MODE_PROP_APPEND;\n\n// Turn a result of a build(...) call into a tree that is more\n// convenient to analyze and transform (e.g. Babel plugins).\n// For example:\n//  treeify(\n//    build'<div href=\"1${a}\" ...${b}><${x} /></div>`,\n//    [X, Y, Z]\n//  )\n// returns:\n//  {\n//    tag: 'div',\n//    props: [ { href: [\"1\", X] },  Y ],\n//    children: [ { tag: Z, props: [], children: [] } ]\n//  }\nexport const treeify = (built, fields) => {\n  const _treeify = built => {\n    let tag = '';\n    let currentProps = null;\n    const props = [];\n    const children = [];\n\n    for (let i = 1; i < built.length; i++) {\n      const field = built[i++];\n      const value = typeof field === 'number' ? fields[field - 1] : field;\n\n      if (built[i] === TAG_SET) {\n        tag = value;\n      }\n      else if (built[i] === PROPS_ASSIGN) {\n        props.push(value);\n        currentProps = null;\n      }\n      else if (built[i] === PROP_SET) {\n        if (!currentProps) {\n          currentProps = Object.create(null);\n          props.push(currentProps);\n        }\n        currentProps[built[++i]] = [value];\n      }\n      else if (built[i] === PROP_APPEND) {\n        currentProps[built[++i]].push(value);\n      }\n      else if (built[i] === CHILD_RECURSE) {\n        children.push(_treeify(value));\n      }\n      else if (built[i] === CHILD_APPEND) {\n        children.push(value);\n      }\n    }\n\n    return { tag, props, children };\n  };\n  const { children } = _treeify(built);\n  return children.length > 1 ? children : children[0];\n};\n\n\nexport const evaluate = (h, built, fields, args) => {\n  let propBody = {};\n  for (let i = 1; i < built.length; i++) {\n    const field = built[i];\n    const value = typeof field === 'number' ? fields[field] : field;\n    const type = built[++i];\n\n    if (type === TAG_SET) {\n      args[0] = value;\n    }\n    else if (type === PROPS_ASSIGN) {\n      args[1] = Object.assign(args[1] || {}, value);\n    }\n    else if (type === PROP_SET) {\n      (args[1] = args[1] || {})[built[++i]] = value;\n    }\n    else if (type === PROP_APPEND) {\n      let key = built[++i];\n      let prev = (args[1] = args[1] || {})[key];\n      let parts = propBody[key];\n\n      if (!parts && (typeof value === 'function' || typeof prev === 'function')) {\n        parts = (prev && [prev]) || [];\n\n        args[1][key] = function() {\n          let prop = '';\n          for (var j = 0; j < parts.length; j++) {\n            prop += typeof parts[j] === 'function' ? parts[j].call(this) : parts[j];\n          }\n          return prop;\n        };\n      }\n\n      if (parts) {\n        parts.push(value);\n      } else {\n        args[1][key] += (value + '');\n      }\n    }\n    else if (type) {\n      // code === CHILD_RECURSE\n      const result = () => h.apply(null, evaluate(h, value, fields, ['', null]));\n\n      // if it's a component we pass the children with closure so the\n      // component is executed before the children of that component.\n      args.push(typeof args[0] === 'function' ? result : result());\n    }\n    else {\n      // code === CHILD_APPEND\n      args.push(value);\n    }\n  }\n\n  return args;\n};\n\nexport const build = function(statics) {\n  const fields = arguments;\n  const h = this;\n\n  let mode = MODE_TEXT;\n  let buffer = '';\n  let quote = '';\n  let current = [0];\n  let char, propName;\n\n  const commit = field => {\n    if (mode === MODE_TEXT && (field || (buffer = buffer.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,'')))) {\n      if (MINI) {\n        current.push(field ? fields[field] : buffer);\n      }\n      else {\n        current.push(field || buffer, CHILD_APPEND);\n      }\n    }\n    else if (mode === MODE_TAGNAME && (field || buffer)) {\n      if (MINI) {\n        current[1] = field ? fields[field] : buffer;\n      }\n      else {\n        current.push(field || buffer, TAG_SET);\n      }\n      mode = MODE_WHITESPACE;\n    }\n    else if (mode === MODE_WHITESPACE && buffer === '...' && field) {\n      if (MINI) {\n        current[2] = Object.assign(current[2] || {}, fields[field]);\n      }\n      else {\n        current.push(field, PROPS_ASSIGN);\n      }\n    }\n    else if (mode === MODE_WHITESPACE && buffer && !field) {\n      if (MINI) {\n        (current[2] = current[2] || {})[buffer] = true;\n      }\n      else {\n        current.push(true, PROP_SET, buffer);\n      }\n    }\n    else if (mode >= MODE_PROP_SET) {\n      if (MINI) {\n        if (mode === MODE_PROP_SET) {\n          (current[2] = current[2] || {})[propName] = field ? buffer ? (buffer + fields[field]) : fields[field] : buffer;\n          mode = MODE_PROP_APPEND;\n        }\n        else if (field || buffer) {\n          current[2][propName] += field ? buffer + fields[field] : buffer;\n        }\n      }\n      else {\n        if (buffer || (!field && mode === MODE_PROP_SET)) {\n          current.push(buffer, mode, propName);\n          mode = MODE_PROP_APPEND;\n        }\n        if (field) {\n          current.push(field, mode, propName);\n          mode = MODE_PROP_APPEND;\n        }\n      }\n    }\n\n    buffer = '';\n  };\n\n  for (let i=0; i<statics.length; i++) {\n    if (i) {\n      if (mode === MODE_TEXT) {\n        commit();\n      }\n      commit(i);\n    }\n\n    for (let j=0; j<statics[i].length;j++) {\n      char = statics[i][j];\n\n      if (mode === MODE_TEXT) {\n        if (char === '<') {\n          // commit buffer\n          commit();\n          if (MINI) {\n            current = [current, '', null];\n          }\n          else {\n            current = [current];\n          }\n          mode = MODE_TAGNAME;\n        }\n        else {\n          buffer += char;\n        }\n      }\n      else if (mode === MODE_COMMENT) {\n        // Ignore everything until the last three characters are '-', '-' and '>'\n        if (buffer === '--' && char === '>') {\n          mode = MODE_TEXT;\n          buffer = '';\n        }\n        else {\n          buffer = char + buffer[0];\n        }\n      }\n      else if (quote) {\n        if (char === quote) {\n          quote = '';\n        }\n        else {\n          buffer += char;\n        }\n      }\n      else if (char === '\"' || char === \"'\") {\n        quote = char;\n      }\n      else if (char === '>') {\n        commit();\n        mode = MODE_TEXT;\n      }\n      else if (!mode) {\n        // Ignore everything until the tag ends\n      }\n      else if (char === '=') {\n        mode = MODE_PROP_SET;\n        propName = buffer;\n        buffer = '';\n      }\n      else if (char === '/' && (mode < MODE_PROP_SET || statics[i][j+1] === '>')) {\n        commit();\n        if (mode === MODE_TAGNAME) {\n          current = current[0];\n        }\n        mode = current;\n        if (MINI) {\n          (current = current[0]).push(h.apply(null, mode.slice(1)));\n        }\n        else {\n          (current = current[0]).push(mode, CHILD_RECURSE);\n        }\n        mode = MODE_SLASH;\n      }\n      else if (char === ' ' || char === '\\t' || char === '\\n' || char === '\\r') {\n        // <a disabled>\n        commit();\n        mode = MODE_WHITESPACE;\n      }\n      else {\n        buffer += char;\n      }\n\n      if (mode === MODE_TAGNAME && buffer === '!--') {\n        mode = MODE_COMMENT;\n        current = current[0];\n      }\n    }\n  }\n  commit();\n\n  if (MINI) {\n    return current.length > 2 ? current.slice(1) : current[1];\n  }\n  return current;\n};\n","/**\n * Copyright 2018 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MINI } from './constants.js';\nimport { build, evaluate } from './build.js';\n\nconst CACHES = new Map();\n\nconst regular = function(statics) {\n  let tmp = CACHES.get(this);\n  if (!tmp) {\n    tmp = new Map();\n    CACHES.set(this, tmp);\n  }\n  tmp = evaluate(this, tmp.get(statics) || (tmp.set(statics, tmp = build(statics)), tmp), arguments, []);\n  return tmp.length > 1 ? tmp : tmp[0];\n};\n\nconst custom = function() {\n  const result = (MINI ? build : regular).apply(this, arguments);\n  if (result) {\n    return Array.isArray(result)\n      ? this(result)\n      : typeof result === 'object'\n      ? result\n      : this([result]);\n  }\n};\n\nconst wrapper = function() {\n  const h = custom.bind(this);\n  return (this.wrap || h).apply(h, arguments);\n};\n\nexport default wrapper;\n","/*\n * @param {object} api\n * @param {Function} [api.subscribe] - Function that listens to state changes.\n * @param {Function} [api.cleanup] - Add the given function to the cleanup stack.\n */\nexport const api = {};\n","export const EMPTY_ARR = [];\nexport const GROUPING = '__g';\n","import { castNode } from './cast-node.js';\nimport { frag } from './frag.js';\n\n/**\n * Add a string or node before a reference node or at the end.\n *\n * @param {Node} parent\n * @param {Node|string} value\n * @param {Node} [endMark]\n * @return {Node}\n */\nexport function add(parent, value, endMark) {\n  value = castNode(value);\n\n  const fragOrNode = frag(value) || value;\n\n  // If endMark is `null`, value will be added to the end of the list.\n  parent.insertBefore(value, endMark && endMark.parentNode && endMark);\n\n  return fragOrNode;\n}\n","import { add } from './add.js';\n\nexport function frag(value) {\n  const { childNodes } = value;\n  if (!childNodes || value.nodeType !== 11) return;\n\n  if (childNodes.length < 2) {\n    return childNodes[0];\n  }\n\n  // For a fragment of 2 elements or more add a startMark. This is required\n  // for multiple nested conditional computeds that return fragments.\n  const _startMark = add(value, '', childNodes[0]);\n\n  return {\n    _startMark\n  };\n}\n","import { api } from './api.js';\nimport { EMPTY_ARR } from './constants.js';\n\nexport function castNode(value) {\n  if (typeof value === 'string') {\n    return document.createTextNode(value);\n  }\n  if (!(value instanceof Node)) {\n    // Passing an empty array creates a DocumentFragment.\n    return api.h(EMPTY_ARR, value);\n  }\n  return value;\n}\n","/**\n * Removes nodes, starting from `startNode` (inclusive) to `endMark` (exclusive).\n *\n * @param  {Node} parent\n * @param  {Node} startNode - This is the start node.\n * @param  {Node} endMark - This is the ending marker node.\n */\nexport function removeNodes(parent, startNode, endMark) {\n  while (startNode && startNode !== endMark) {\n    const n = startNode.nextSibling;\n    // Is needed in case the child was pulled out the parent before clearing.\n    if (parent === startNode.parentNode) {\n      parent.removeChild(startNode);\n    }\n    startNode = n;\n  }\n}\n","import { api } from './api.js';\n\nexport function property(el, value, name, isAttr, isCss) {\n  if (value == null) return;\n  if (!name || (name === 'attrs' && (isAttr = true))) {\n    for (name in value) {\n      api.property(el, value[name], name, isAttr, isCss);\n    }\n  } else if (name[0] === 'o' && name[1] === 'n' && !value.$o) {\n    // Functions added as event handlers are not executed\n    // on render unless they have an observable indicator.\n    handleEvent(el, name, value);\n  } else if (typeof value === 'function') {\n    api.subscribe(function setProperty() {\n      api.property(el, value.call({ el, name }), name, isAttr, isCss);\n    });\n  } else if (isCss) {\n    el.style.setProperty(name, value);\n  } else if (\n    isAttr ||\n    name.slice(0, 5) === 'data-' ||\n    name.slice(0, 5) === 'aria-'\n  ) {\n    el.setAttribute(name, value);\n  } else if (name === 'style') {\n    if (typeof value === 'string') {\n      el.style.cssText = value;\n    } else {\n      api.property(el, value, null, isAttr, true);\n    }\n  } else {\n    if (name === 'class') name += 'Name';\n    el[name] = value;\n  }\n}\n\nfunction handleEvent(el, name, value) {\n  name = name.slice(2).toLowerCase();\n\n  if (value) {\n    el.addEventListener(name, eventProxy);\n  } else {\n    el.removeEventListener(name, eventProxy);\n  }\n\n  (el._listeners || (el._listeners = {}))[name] = value;\n}\n\n/**\n * Proxy an event to hooked event handlers.\n * @param {Event} e - The event object from the browser.\n * @return {Function}\n */\nfunction eventProxy(e) {\n  // eslint-disable-next-line\n  return this._listeners[e.type](e);\n}\n","/* Adapted from Hyper DOM Expressions - The MIT License - Ryan Carniato */\nimport { api } from './api.js';\nimport { add } from './add.js';\n\n/**\n * Create a sinuous `h` tag aka hyperscript.\n * @param {object} options\n * @param  {boolean} isSvg\n * @return {Function} `h` tag.\n */\nexport function context(options, isSvg) {\n  for (let i in options) api[i] = options[i];\n\n  function h() {\n    const args = Array.from(arguments);\n    let el;\n\n    function item(arg) {\n      if (arg == null);\n      else if (typeof arg === 'string') {\n        if (el) {\n          add(el, arg);\n        } else {\n          if (isSvg) {\n            el = document.createElementNS('http://www.w3.org/2000/svg', arg);\n          } else {\n            el = document.createElement(arg);\n          }\n        }\n      } else if (Array.isArray(arg)) {\n        // Support Fragments\n        if (!el) el = document.createDocumentFragment();\n        arg.forEach(item);\n      } else if (arg instanceof Node) {\n        if (el) {\n          add(el, arg);\n        } else {\n          // Support updates\n          el = arg;\n        }\n      } else if (typeof arg === 'object') {\n        api.property(el, arg, null, isSvg);\n      } else if (typeof arg === 'function') {\n        if (el) {\n          const endMark = add(el, '');\n          api.insert(el, arg, endMark);\n        } else {\n          // Support Components\n          el = arg.apply(null, args.splice(1));\n        }\n      } else {\n        add(el, '' + arg);\n      }\n    }\n\n    args.forEach(item);\n    return el;\n  }\n\n  return h;\n}\n","import {app} from './app'\n\ndocument.querySelector('#root').append(app())","/* Adapted from DOM Expressions - The MIT License - Ryan Carniato */\nimport { add } from './add.js';\nimport { insert } from './insert.js';\nimport { property } from './property.js';\nimport { api } from './api.js';\nimport { removeNodes } from './remove-nodes.js';\n\napi.insert = insert;\napi.property = property;\napi.add = add;\napi.rm = removeNodes;\n\nexport { context } from './h.js';\nexport { api };\n","import { api } from './api.js';\nimport { add } from './add.js';\nimport { removeNodes } from './remove-nodes.js';\n\nexport function insert(el, value, endMark, current, startNode) {\n  // This is needed if the el is a DocumentFragment initially.\n  el = (endMark && endMark.parentNode) || el;\n\n  // Save startNode of current. In clear() endMark.previousSibling\n  // is not always accurate if content gets pulled before clearing.\n  startNode = startNode || current instanceof Node && current;\n\n  if (value === current);\n  else if (\n    (!current || typeof current === 'string') &&\n    (typeof value === 'string' || (typeof value === 'number' && (value += '')))\n  ) {\n    // Block optimized for string insertion.\n    if (current == null || !el.firstChild) {\n      if (endMark) {\n        add(el, value, endMark);\n      } else {\n        // textContent is a lot faster than append -> createTextNode.\n        el.textContent = value;\n      }\n    } else {\n      if (endMark) {\n        (endMark.previousSibling || el.lastChild).data = value;\n      } else {\n        el.firstChild.data = value;\n      }\n    }\n    current = value;\n  } else if (typeof value === 'function') {\n    api.subscribe(function insertContent() {\n      current = api.insert(el, value.call({ el, endMark }), endMark, current, startNode);\n    });\n  } else {\n    // Block for nodes, fragments, Arrays, non-stringables and node -> stringable.\n    if (endMark) {\n      // `current` can't be `0`, it's coerced to a string in insert.\n      if (current) {\n        if (!startNode) {\n          // Support fragments\n          startNode = (current._startMark && current._startMark.nextSibling)\n            || endMark.previousSibling;\n        }\n        removeNodes(el, startNode, endMark);\n      }\n    } else {\n      el.textContent = '';\n    }\n    current = null;\n\n    if (value && value !== true) {\n      current = add(el, value, endMark);\n    }\n  }\n\n  return current;\n}\n","function templateValues(args) {\r\n  const [strings, ...templateArgs] = args;\r\n  const result = [];\r\n  for (const [index, s] of strings.entries()) {\r\n    if (s !== \"\") {\r\n      result.push(s);\r\n    }\r\n    let arg = templateArgs[index];\r\n    if (typeof arg !== \"undefined\") {\r\n      result.push(arg);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nlet interpunct = new RegExp(\"\",\"g\");\r\n\r\nfunction createInitialBuilder(constructor, type) {\r\n  function setPropertyValue(...args) {\r\n    let [value] = args;\r\n    let { props, prop } = this.__element_info__;\r\n    if (typeof value === \"undefined\") {\r\n      props = { ...props };\r\n      delete props[prop];\r\n      return createBuilder({ props, prop: null });\r\n    }\r\n    else if (Array.isArray(value) && Object.isFrozen(value)) {\r\n      value = templateValues(args).join(\"\");\r\n    }\r\n    else if (args.length > 1) {\r\n      value = args;\r\n    }\r\n    props = { ...props, [prop]: value };\r\n    return createBuilder({ props, prop: null });\r\n  }\r\n  function setPropsValues(props) {\r\n    let { props: existingProps } = this.__element_info__;\r\n    props = { ...existingProps, ...props };\r\n    return createBuilder({ props, prop: null });\r\n  }\r\n  function createBuilder(propsInfo) {\r\n    let builder = new Proxy(() => { }, {\r\n      apply(target, thisArg, children) {\r\n        let { props } = builder.__element_info__;\r\n        if (typeof props.exec === \"function\") {\r\n          let exec = props.exec;\r\n          delete props.exec;\r\n          let result = exec(builder, children);\r\n          props.exec = exec;\r\n          return result;\r\n        }\r\n        let [first] = children;\r\n        if (Array.isArray(first) && Object.isFrozen(first)) {\r\n          children = templateValues(children);\r\n        }\r\n        if (Array.isArray(props.children)) {\r\n          props.children.push(...children)\r\n          children = props.children;\r\n          delete props.children;\r\n        }\r\n        for (let i = 0; i < children.length; i++) {\r\n          let arg = children[i];\r\n          if (typeof arg === \"function\" && arg.__element_info__) {\r\n            children[i] = arg();\r\n          }\r\n        }\r\n        return constructor(type, props, ...children);\r\n      },\r\n      get(target, prop) {\r\n        const result = target[prop];\r\n        if (typeof result !== \"undefined\") {\r\n          return result;\r\n        }\r\n        if (prop === \"props\") {\r\n          return setPropsValues;\r\n        }\r\n        else if (typeof prop === \"string\") {\r\n          if(prop.indexOf(\"\") !== -1) {\r\n            prop = prop.replace(interpunct, \"-\");\r\n          }\r\n          if (prop.endsWith(\"Value\") && prop.length > 5) {\r\n            return target.__element_info__.props[prop.slice(0, -5)];\r\n          }\r\n          target.__element_info__.prop = prop;\r\n          return setPropertyValue;\r\n        }\r\n      }\r\n    })\r\n    builder.__element_info__ = propsInfo;\r\n    return builder;\r\n  }\r\n  return createBuilder({ props: {}, prop: null });\r\n}\r\n\r\n\r\nfunction builders(constructor, types = []) {\r\n  if (typeof constructor !== \"function\") {\r\n    throw Error(\"elementConstructor argument must be present and it must be a function.\");\r\n  }\r\n  if (types.length > 0) {\r\n    let builders = [];\r\n    for (const element of types) {\r\n      builders.push(createInitialBuilder(constructor, element));\r\n    }\r\n    return builders;\r\n  }\r\n  else {\r\n    return new Proxy(() => { }, {\r\n      get(target, prop) {\r\n        const result = target[prop];\r\n        if (typeof result !== \"undefined\") {\r\n          return result;\r\n        }\r\n        target[prop] = createInitialBuilder(constructor, prop);\r\n        return target[prop];\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default builders;\r\n","import { api } from \"sinuous\";\nimport builders from \"webscript\";\n\nexport const {\n  main,\n  a,\n  button,\n  progress,\n  span,\n  section,\n  h2,\n  div,\n  input,\n  select,\n  option,\n  p,\n  table,\n  thead,\n  tbody,\n  tr,\n  td,\n} = builders(api.h);\nexport const { svg, circle } = builders(api.hs);\n\nexport const frag = (...elements) => {\n  let fragment = new DocumentFragment();\n  elements.forEach((element) => {\n    fragment.append(element);\n  });\n  return fragment;\n};\n","import { section, h2 } from \"../elements\";\n\nimport \"./card.css\";\n\nexport const card = ({ title }, ...children) => {\n  return section.class(\"card \" + title.replace(\" \", \"-\"))(h2(title), children);\n};\n","import { o } from \"sinuous\";\nimport { button } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./counter.css\";\n\nexport const counter = () => {\n  let count = o(0);\n\n  return card(\n    { title: \"Counter\" },\n    count,\n    button.onclick(() => count(count() + 1))(\"+\")\n  );\n};\n","import { o } from \"sinuous\";\nimport { span, input } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./temperatureConverter.css\";\n\nfunction trunc(n) {\n  return Number(n.toFixed(2));\n}\n\nfunction remove0(n) {\n  if (/^0\\d+$/.test(n)) return n.slice(1);\n  if (/^-0\\d+$/.test(n)) return \"-\" + n.slice(2);\n  return n;\n}\n\nfunction getC(f) {\n  return trunc((5 / 9) * (f - 32)) || -17.78; // 0 F\n}\nfunction getF(c) {\n  return trunc((9 / 5) * c + 32) || 32; // 0 C\n}\nlet r = /^-?\\d*.?\\d*$/;\nfunction isValid(temp) {\n  if (/^-?\\d*$/.test(temp)) return true;\n  if (/^-?\\d+[.]?\\d*$/.test(temp)) return true;\n  return false;\n}\n\nexport const temperatureConverter = () => {\n  let c = o(0);\n  let f = o(32);\n\n  const updateFromC = (e) => update(e, c, f, getF);\n  const updateFromF = (e) => update(e, f, c, getC);\n\n  const update = (e, from, to, get) => {\n    let value = e.target.value; //|| \"0\";\n    if (!isValid(value)) return;\n    value = remove0(value);\n    from(value);\n    to(get(value));\n  };\n\n  return card(\n    { title: \"Temperature Converter\" },\n    span(input.value(c).oninput(updateFromC), \"Celsius\"),\n    \"=\",\n    span(input.value(f).oninput(updateFromF), \"Fahrenheit\")\n  );\n};\n","import { o } from \"sinuous\";\nimport { S } from \"sinuous/observable\";\nimport { div, select, option, input, button } from \"../elements\";\nimport { card } from \"../components/card\";\nimport \"./flightBooker.css\";\n\nlet flightMap = {\n  1: \"one-way flight\",\n  2: \"return flight\",\n};\n\nfunction tryAsDate(dateString) {\n  let dateArr = dateString.split(\".\").reverse();\n  if (dateArr[1].length !== 2 || dateArr[2].length !== 2) {\n    return false;\n  }\n  let date = new Date(dateArr.join(\"-\"));\n  return date.valueOf() || false;\n}\n\nfunction formatAsString(date) {\n  return date.toISOString().slice(0, 10).split(\"-\").reverse().join(\".\");\n}\n\nexport const flightBooker = () => {\n  let flightType = o(1);\n  let startDate = o(formatAsString(new Date()));\n  let returnDate = o(formatAsString(new Date()));\n\n  let error1 = S(() => !tryAsDate(startDate()));\n  let error2 = S(() => !tryAsDate(returnDate()));\n  let error3 = S(() => tryAsDate(returnDate()) < tryAsDate(startDate()));\n\n  let isBookButtonDisabled = S(() => error1() || error2() || error3());\n  let isOneWay = S(() => flightType() === 1);\n  let startDateClass = S(() => (error1() ? \"error\" : \"\"));\n  let returnDateClass = S(() => (error2() ? \"error\" : \"\"));\n\n  function book() {\n    let timeStrings = {\n      1: \" for \" + startDate(),\n      2: \" from \" + startDate() + \" to \" + returnDate(),\n    };\n    alert(\n      \"You have booked a \" + flightMap[flightType()] + timeStrings[flightType()]\n    );\n  }\n\n  return card(\n    { title: \"Flight Booker\" },\n    div(\n      select.value(flightType).onchange((e) => flightType(e.target.value))(\n        option.value`1`(flightMap[1]),\n        option.value`2`(flightMap[2])\n      ),\n      input\n        .value(startDate)\n        .class(startDateClass)\n        .oninput((e) => startDate(e.target.value)),\n      input\n        .value(returnDate)\n        .class(returnDateClass)\n        .oninput((e) => returnDate(e.target.value))\n        .disabled(isOneWay),\n      button.onclick(book).disabled(isBookButtonDisabled)(\"Book\")\n    )\n  );\n};\n","import { o } from \"sinuous\";\nimport { S } from \"sinuous/observable\";\nimport { card } from \"../components/card\";\nimport { div, progress, input, button } from \"../elements\";\n\nimport \"./timer.css\";\n\nexport const timer = () => {\n  const MAX = 30000;\n\n  let duration = o(5000);\n  let durationFormatted = S(() => (duration() / 1000).toFixed(1));\n  let start = o();\n  let time = o();\n  let p = S(() => (time() - start()) / duration());\n  let interval;\n\n  function createInterval() {\n    return setInterval(() => {\n      time(new Date().valueOf());\n    }, 10);\n  }\n  function startTimer() {\n    clearInterval(interval);\n    start(new Date().valueOf());\n    time(start());\n    interval = createInterval();\n  }\n\n  startTimer();\n\n  return card(\n    { title: \"Timer\" },\n    div.class`wrapper`(\n      \"Elapsed Time:\",\n      progress.value(p),\n      div.class`duration`(durationFormatted),\n      \"Duration:\",\n      input.type`range`\n        .min(0)\n        .max(MAX)\n        .value(duration)\n        .oninput((e) => duration(e.target.value)),\n      button.onclick(startTimer)(\"Reset Timer\")\n    )\n  );\n};\n","import { o } from \"sinuous\";\nimport { S, subscribe } from \"sinuous/observable\";\nimport { div, input, select, option, button } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./crud.css\";\n\nexport const crud = () => {\n  let prefix = o(\"\");\n  let entries = o([\n    o([\"Paul\", \"Atreides\"]),\n    o([\"Gurney\", \"Halleck\"]),\n    o([\"Duncan\", \"Idaho\"]),\n  ]);\n  let filteredEntries = S(() =>\n    // get filtered entries in which entry[1] startsWith prefix\n    // get array of [entry[0], entry[1], index]\n    entries()\n      .map((entry, i) => [entry()[0], entry()[1], i])\n      .filter((entry) =>\n        entry[1].toLowerCase().startsWith(prefix().toLowerCase())\n      )\n  );\n  let name = o(\"\");\n  let surname = o(\"\");\n  let selected = o(-1);\n  subscribe(() => {\n    prefix();\n    selected(-1);\n  });\n\n  function createHandler() {\n    entries(entries().concat(o([name(), surname()])));\n  }\n  function updateHandler() {\n    // if selected > -1 then update entries[selected]\n    selected() > -1 && entries()[selected()]([name(), surname()]);\n  }\n  function deleteHandler() {\n    // if selected > -1 then delete entries[selected]\n    selected() > -1 && entries(entries().filter((entry, i) => i != selected()));\n  }\n\n  return card(\n    { title: \"CRUD\" },\n    div.class`wrapper`(\n      \"Filter prefix:\",\n      input.value(prefix).oninput((e) => prefix(e.target.value)),\n      select.value(selected).oninput((e) => selected(e.target.value))\n        .size`4`(() =>\n        filteredEntries().map((entry) =>\n          option.value(entry[2])(entry[1] + \", \" + entry[0])\n        )\n      ),\n      div(\n        \"Name:\",\n        input.value(name).oninput((e) => name(e.target.value)),\n        \"Surname:\",\n        input.value(surname).oninput((e) => surname(e.target.value))\n      ),\n      div.class`buttons`(\n        button.onclick(createHandler)(\"Create\"),\n        button.onclick(updateHandler)(\"Update\"),\n        button.onclick(deleteHandler)(\"Delete\")\n      )\n    )\n  );\n};\n","import { o } from \"sinuous\";\nimport { subscribe, sample } from \"sinuous/observable\";\nimport { frag, div, input, svg, circle, button, p } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./circleDrawer.css\";\n\nexport const circleDrawer = () => {\n  const BASE_RADIUS = 30;\n\n  let step = o(0);\n  let snapshots = o([o([])]);\n  let radius = o(BASE_RADIUS);\n  let resizing = o(false);\n  let present = o([]);\n  subscribe(() => present(snapshots()[step()]()));\n  subscribe(() => {\n    if (resizing()) {\n      let resizingIndex = sample(present).findIndex(\n        (c) => c.x === resizing().x && c.y === resizing().y\n      );\n      let newPresent = sample(present).slice();\n      newPresent[resizingIndex] = {\n        ...sample(present)[resizingIndex],\n        r: Number(radius()),\n      };\n      present(newPresent);\n    }\n  });\n\n  function handleRightClick(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let c = e.target;\n    resizing({\n      x: c.cx.baseVal.value,\n      y: c.cy.baseVal.value,\n      r: c.r.baseVal.value,\n    });\n    radius(resizing().r);\n  }\n\n  function addCircle(e) {\n    let x = e.layerX;\n    let y = e.layerY;\n    let newSnapshot = present().slice();\n    newSnapshot.push({ x, y, r: BASE_RADIUS });\n    addSnapshot(o(newSnapshot));\n  }\n\n  function addSnapshot(newSnapshot) {\n    let newSnapshots = snapshots().slice(0, step() + 1);\n    newSnapshots.push(newSnapshot);\n    snapshots(newSnapshots);\n    step(step() + 1);\n  }\n\n  function undo() {\n    step(Math.max(step() - 1, 0));\n  }\n\n  function redo() {\n    step(Math.min(step() + 1, snapshots().length - 1));\n  }\n\n  function endResize() {\n    if (radius() !== resizing().r) {\n      resizing(false);\n      radius(BASE_RADIUS);\n      addSnapshot(o(present().slice()));\n    }\n    resizing(false);\n  }\n\n  const overlay = () =>\n    frag(\n      div.class`overlay`.onclick(endResize)(),\n      div.class`resizer`(\n        p`Adjust radius of circle at (${() => resizing().x},\n        ${() => resizing().y})`,\n        p(radius),\n        input.type`range`\n          .min(0)\n          .max(100)\n          .value(radius)\n          .oninput((e) => radius(e.target.value))\n      )\n    );\n\n  const circleSVG = ({ c, handleRightClick }) =>\n    circle.cx(c.x).cy(c.y).r(c.r).fill`white`.stroke`black`\n      .onclick((e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      })\n      .oncontextmenu(handleRightClick);\n\n  const view = card(\n    { title: \"Circle Drawer\" },\n    div.class`wrapper`(\n      div.class`buttons`(\n        button.disabled(() => !step()).onclick(undo)(\"Undo\"),\n        button.disabled(() => step() === snapshots().length - 1).onclick(redo)(\n          \"Redo\"\n        )\n      ),\n      div.class`canvas`(\n        svg.onclick(addCircle)(() =>\n          present().map((c) => circleSVG({ c, handleRightClick }))\n        )\n      ),\n      () => resizing() && overlay()\n    )\n  );\n\n  return view;\n};\n","export let sampleData = {\n  A0: 'Data',\n  A1: '20',\n  A2: '15',\n  A3: 'text',\n  B1: '79',\n  B2: '3.9',\n  A5: 'Formula',\n  B5: 'Output',\n  A6: '\"=sum(D1:D5)\"',\n  B6: '=sum(D1:D5)',\n  A7: '\"=sub(A1:B2)\"',\n  B7: '=sub(A1:B2)',\n  A8: '\"=mul(D1:D5)\"',\n  B8: '=mul(D1:D5)',\n  A9: '\"=div(A1:B2)\"',\n  B9: '=div(A1:B2)',\n  A10: '\"=mod(A1:B2)\"',\n  B10: '=mod(A1:B2)',\n  C0: 'Formula',\n  D0: 'Output',\n  C1: '\"=sum(A1,A2)\"',\n  D1: '=sum(A1,A2)',\n  C2: '\"=sub(D1,A1)\"',\n  D2: '=sub(D1,A1)',\n  C3: '\"=mul(D2,A2)\"',\n  D3: '=mul(D2,A2)',\n  C4: '\"=div(D3,A1)\"',\n  D4: '=div(D3,A1)',\n  C5: '\"=mod(A1,A2)\"',\n  D5: '=mod(A1,A2)',\n  C7: '\"=sum(A1,A3)\"',\n  D7: '=sum(A1,A3)',\n  C8: '\"=sum(A1,A4)\"',\n  D8: '=sum(A1,A4)',\n  C9: '\"=sumA1,A4)\"',\n  D9: '=sumA1,A4)',\n  C10: '\"=sm(A1,A4)\"',\n  D10: '=sm(A1,A4)',\n  C11: '\"=sum(A1,307)\"',\n  D11: '=sum(A1,307)',\n  C12: '\"=sum(159,4)\"',\n  D12: '=sum(159,4)',\n  C14: '\"=A1\"',\n  D14: '=A1',\n  C15: '\"=A3\"',\n  D15: '=A3'\n}\n","import {subscribe} from 'sinuous/observable'\n\nexport class Parser {\n  constructor(store, columns, rows) {\n    this.cells = {}\n    this.store = store\n    this.columns = columns\n    this.rows = rows\n    this.operations = {\n      sum: (a, b) => a + b,\n      sub: (a, b) => a - b,\n      mul: (a, b) => a * b,\n      div: (a, b) => a / b,\n      mod: (a, b) => a % b,\n      exp: (a, b) => a ** b\n    }\n\n    subscribe(() => this.cells = this.store())\n  }\n\n  cartesianProduct(letters, numbers) {\n    var result = []\n    letters.forEach(letter => {\n      numbers.forEach(number => {\n        result.push(letter + number)\n      })\n    })\n    return result\n  }\n\n  findArrRange(arr, start, end) {\n    let startI = arr.indexOf(start)\n    let endI = arr.indexOf(end)\n    if (startI == -1 || endI == -1 || startI > endI) return []\n    return arr.slice(startI, endI + 1)\n  }\n\n  getRange(rangeStart, rangeEnd) {\n    rangeStart = this.splitOperand(rangeStart)\n    rangeEnd = this.splitOperand(rangeEnd)\n    let letters = this.findArrRange(this.columns, rangeStart[0], rangeEnd[0])\n    let numbers = this.findArrRange(this.rows, rangeStart[1], rangeEnd[1])\n    return this.cartesianProduct(letters, numbers)\n  }\n\n  splitOperand(operand) {\n    return [operand.match(/[a-zA-Z]+/)[0], Number(operand.match(/\\d+/)[0])]\n  }\n\n  rangeOperation(op, rangeStart, rangeEnd) {\n    if (!(this.isWellFormed(rangeStart) && this.isWellFormed(rangeEnd)))\n      return this.originalString\n\n    let range = this.getRange(rangeStart, rangeEnd)\n\n    return range\n      .map(address => Number(this.parse(this.cells[address]())))\n      .reduce(this.operations[op])\n  }\n\n  singleOperation(op, operand1, operand2) {\n    let first = this.parseOperand(operand1)\n    let second = this.parseOperand(operand2)\n\n    if (first === null || second === null) return this.originalString\n\n    return this.operations[op](first, second).toString()\n  }\n\n  isWellFormed(operand) {\n    return /[a-zA-Z]+\\d+/.test(operand)\n  }\n\n  parseOperand(operand) {\n    if (!isNaN(Number(operand))) return Number(operand)\n    if (operand in this.cells) return Number(this.parse(this.cells[operand]()))\n    if (this.isWellFormed(operand)) return 0\n\n    return null\n  }\n\n  parseOperation(op, formula) {\n    if (!(formula.startsWith('(') && formula.endsWith(')')))\n      return this.originalString\n\n    formula = formula.slice(1, formula.length - 1)\n\n    let operationType\n    let formulaArr\n    if (formula.includes(',')) {\n      operationType = 'single'\n      formulaArr = formula.split(',')\n    } else if (formula.includes(':')) {\n      operationType = 'range'\n      formulaArr = formula.split(':')\n    }\n\n    if (formulaArr.length !== 2) return this.originalString\n\n    if (operationType === 'single')\n      return this.singleOperation(op, formulaArr[0], formulaArr[1])\n\n    if (operationType === 'range')\n      return this.rangeOperation(op, formulaArr[0], formulaArr[1])\n\n    return this.originalString\n  }\n\n  parse(str) {\n    this.originalString = str\n    if (typeof str !== 'string') return ''\n    if (!str.startsWith('=')) return str\n\n    let formula = str.slice(1)\n    if (formula.slice(0, 3).toLowerCase() in this.operations) {\n      return this.parseOperation(\n        formula.slice(0, 3).toLowerCase(),\n        formula.slice(3).toUpperCase()\n      )\n    } else {\n      return this.cells[formula] || str\n    }\n  }\n}\n","import { o } from \"sinuous\";\nimport { sample } from \"sinuous/observable\";\nimport { card } from \"../../components/card\";\nimport { sampleData } from \"./sampleData.js\";\nimport { Parser } from \"./parse.js\";\nimport {\n  div,\n  table,\n  thead,\n  tbody,\n  tr,\n  td,\n  input,\n  button,\n} from \"../../elements\";\n\nimport \"./cells.css\";\n\nconst LETTERS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nfunction range(n) {\n  return [...Array(n).keys()];\n}\nfunction letterRange(n) {\n  return range(n).map(getNumberAsLetters);\n}\nfunction getBase26(n) {\n  let result = [];\n  while (n > 25) {\n    let remainder = n % 26;\n    result.push(remainder);\n    n = Math.floor(n / 26) - 1;\n  }\n  result.push(n);\n  return result.reverse();\n}\nfunction getNumberAsLetters(n) {\n  let arr = getBase26(n);\n  return arr.map((num) => LETTERS[num]).join(\"\");\n}\nfunction findAdjacent(arr, value, direction) {\n  let index = arr.indexOf(value);\n  if (index === -1) return null;\n  if (direction === \"before\")\n    return arr[index - 1] === undefined ? null : arr[index - 1];\n  if (direction === \"after\") return arr[index + 1] || null;\n  return null;\n}\n\nexport const cells = (props) => {\n  let shape = (props && props.shape) || [100, 100];\n\n  Object.keys(sampleData).forEach((key) => {\n    // Make each entry an observable\n    sampleData[key] = o(sampleData[key]);\n  });\n  const data = o(sampleData);\n\n  const rows = range(shape[1]);\n  const columns = letterRange(shape[0]);\n  const p = new Parser(data, columns, rows);\n\n  let focused = o(undefined);\n  let tBody; // Used as a ref\n\n  function createNewCell(key) {\n    let dataRef = sample(data);\n    if (!dataRef[key]) {\n      dataRef[key] = o(\"\");\n      data(dataRef);\n    }\n  }\n\n  function handleFocus(e, key) {\n    createNewCell(key);\n    focused(key);\n    setTimeout(() => {\n      // The timeout allows the selection to occur after\n      // the parsing switch inside a cell\n      e.target.setSelectionRange(0, 9999);\n    }, 10);\n  }\n\n  function handleBlur() {\n    focused(undefined);\n  }\n\n  function handleInput(e, key) {\n    sample(data)[key](e.target.value);\n  }\n\n  function handleKeydown(e, column, row) {\n    // Navigate across the spreadsheet with arrow keys (and alt/option key)\n    let selector;\n    if (e.key === \"ArrowUp\") {\n      let newRow = findAdjacent(rows, row, \"before\");\n      selector = newRow !== null ? column + newRow : null;\n    }\n    if (e.key === \"ArrowDown\" || e.key === \"Enter\") {\n      let newRow = findAdjacent(rows, row, \"after\");\n      selector = newRow !== null ? column + newRow : null;\n    }\n    if (e.key === \"ArrowLeft\" && e.altKey) {\n      let newColumn = findAdjacent(columns, column, \"before\");\n      selector = newColumn !== null ? newColumn + row : null;\n    }\n    if (e.key === \"ArrowRight\" && e.altKey) {\n      let newColumn = findAdjacent(columns, column, \"after\");\n      selector = newColumn !== null ? newColumn + row : null;\n    }\n\n    if (selector) {\n      e.preventDefault();\n      let input = tBody.querySelector(\"#input-\" + selector);\n      input.focus();\n    }\n  }\n\n  function clear() {\n    data({});\n  }\n\n  const view = card(\n    { title: \"Cells\" },\n    div.class`wrapper`(\n      table(\n        thead(\n          tr(td.class`row-key`, () =>\n            columns.map((column) => td.class`column-key`(column))\n          )\n        ),\n        tbody(() =>\n          rows.map((i) =>\n            tr.id(\"row-\" + i)(\n              td.class`row-key`(i),\n              columns.map((j) =>\n                td.id(j + i)(\n                  input\n                    .id(\"input-\" + j + i)\n                    .onfocus((e) => handleFocus(e, j + i))\n                    .onblur(handleBlur)\n                    .onkeydown((e) => handleKeydown(e, j, i))\n                    .oninput((e) => handleInput(e, j + i))\n                    .value(() => {\n                      return j + i in data()\n                        ? focused() === j + i\n                          ? data()[j + i]()\n                          : p.parse(data()[j + i]())\n                        : \"\";\n                    })\n                )\n              )\n            )\n          )\n        )\n      )\n    ),\n    button.onclick(clear)(\"Clear\")\n  );\n\n  tBody = view.querySelector(\"tbody\"); // Assign ref to domNode\n\n  return view;\n};\n","import { main, a } from \"./elements\";\nimport \"./app.css\";\n\nimport { counter } from \"./tasks/counter\";\nimport { temperatureConverter } from \"./tasks/temperatureConverter\";\nimport { flightBooker } from \"./tasks/flightBooker\";\nimport { timer } from \"./tasks/timer\";\nimport { crud } from \"./tasks/crud\";\nimport { circleDrawer } from \"./tasks/circleDrawer\";\nimport { cells } from \"./tasks/cells/cells\";\n\nexport const app = () => {\n  return main.class`App`(\n    a.href`../../index.html`(\"Home\"),\n    counter(),\n    temperatureConverter(),\n    flightBooker(),\n    timer(),\n    crud(),\n    circleDrawer(),\n    cells()\n  );\n};\n","import {app} from './app'\n\ndocument.querySelector('#root').append(app())","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}