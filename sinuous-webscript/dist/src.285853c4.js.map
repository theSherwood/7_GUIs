{"version":3,"sources":["../observable/src/observable.js","../observable/src/utils.js","../htm/src/index.js","../htm/src/build.js","../h/src/index.js","../h/src/api.js","../h/src/constants.js","../h/src/add.js","../h/src/frag.js","../h/src/cast-node.js","../h/src/remove-nodes.js","../h/src/property.js","../h/src/h.js","../src/index.js","../h/src/insert.js","../src/webscript.js","src/elements.js","src/components/card.js","src/tasks/counter.js","src/tasks/temperatureConverter.js","src/tasks/flightBooker.js","src/tasks/timer.js","src/tasks/crud.js","src/tasks/circleDrawer.js","src/tasks/cells/sampleData.js","src/tasks/cells/parse.js","src/tasks/cells/cells.js","src/app.js","src/index.js"],"names":["EMPTY_ARR","tracking","queue","isListening","root","fn","prevTracking","rootUpdate","resetUpdate","result","_unsubscribe","sample","value","transaction","prevQueue","q","forEach","data","_pending","pending","observable","nextValue","arguments","length","_observers","has","add","_observables","push","clearedUpdate","_runObservers","Set","observer","_fresh","$o","computed","update","_children","prevChildren","u","indexOf","getChildrenDeep","children","reduce","res","curr","concat","removeFreshChildren","o","_update","delete","cleanup","_cleanups","subscribe","on","obs","seed","onchanges","unsubscribe","c","evaluate","h","built","fields","args","propBody","i","field","type","Object","assign","key","prev","parts","prop","j","call","this","apply","build","statics","char","propName","mode","buffer","quote","current","commit","replace","CACHES","Map","regular","tmp","get","set","custom","Array","isArray","bind","wrap","api","parent","endMark","fragOrNode","childNodes","nodeType","t","document","createTextNode","Node","insertBefore","parentNode","removeNodes","startNode","n","nextSibling","removeChild","eventProxy","e","_listeners","context","options","isSvg","from","el","item","arg","createElementNS","createElement","createDocumentFragment","property","insert","splice","hs","html","htm","svg","_startMark","previousSibling","textContent","firstChild","lastChild","name","isAttr","isCss","style","setProperty","slice","setAttribute","cssText","toLowerCase","addEventListener","removeEventListener","rm","templateValues","strings","templateArgs","entries","index","s","interpunct","RegExp","createInitialBuilder","constructor","setPropertyValue","__element_info__","props","createBuilder","isFrozen","join","setPropsValues","propsInfo","builder","Proxy","target","thisArg","exec","first","endsWith","types","Error","builders","main","a","button","progress","span","section","h2","div","input","select","option","p","table","thead","tbody","tr","td","circle","frag","elements","fragment","DocumentFragment","element","append","card","title","class","counter","count","onclick","trunc","Number","toFixed","remove0","test","getC","f","getF","r","isValid","temp","temperatureConverter","to","oninput","flightMap","tryAsDate","dateString","dateArr","split","reverse","Date","valueOf","formatAsString","date","toISOString","flightBooker","flightType","startDate","returnDate","error1","error2","error3","isBookButtonDisabled","isOneWay","startDateClass","returnDateClass","onchange","disabled","book","timeStrings","alert","timer","MAX","interval","duration","durationFormatted","start","time","startTimer","clearInterval","setInterval","min","max","crud","prefix","filteredEntries","map","entry","filter","startsWith","surname","selected","size","createHandler","updateHandler","deleteHandler","circleDrawer","BASE_RADIUS","step","snapshots","radius","resizing","present","handleRightClick","preventDefault","stopPropagation","x","cx","baseVal","y","cy","addSnapshot","newSnapshot","newSnapshots","endResize","resizingIndex","findIndex","newPresent","view","undo","Math","redo","addCircle","layerX","layerY","circleSVG","fill","stroke","oncontextmenu","sampleData","A0","A1","A2","A3","B1","B2","A5","B5","A6","B6","A7","B7","A8","B8","A9","B9","A10","B10","C0","D0","C1","D1","C2","D2","C3","D3","C4","D4","C5","D5","C7","D7","C8","D8","C9","D9","C10","D10","C11","D11","C12","D12","C14","D14","C15","D15","Parser","store","columns","rows","cells","operations","sum","b","sub","mul","mod","exp","letters","numbers","letter","number","arr","end","startI","endI","rangeStart","rangeEnd","splitOperand","findArrRange","cartesianProduct","operand","match","op","isWellFormed","getRange","address","parse","originalString","operand1","operand2","parseOperand","second","toString","isNaN","formula","includes","operationType","formulaArr","singleOperation","rangeOperation","str","parseOperation","toUpperCase","LETTERS","range","keys","letterRange","getNumberAsLetters","getBase26","remainder","floor","num","findAdjacent","direction","undefined","shape","tBody","focused","handleFocus","createNewCell","dataRef","querySelector","focus","setSelectionRange","handleBlur","cellView","hasFocus","id","onfocus","onblur","onkeydown","handleKeydown","column","row","selector","newRow","altKey","newColumn","handleInput","clear","app","href"],"mappings":";AA0RqB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,QAAA,EAAA,EAAA,QAAA,QAAA,EAAA,QAAA,YAAA,EAAA,QAAA,WAAA,QAAA,EAAA,EAAA,QAAA,GAAA,EAAA,QAAA,KAAA,EAAA,QAAA,OAAA,EAAA,QAAA,UAAA,EAAA,QAAA,YAAA,EAAA,QAAA,YAAA,EAxRrB,MAAMA,EAAY,GAClB,IAAIC,EACAC,EAMG,SAASC,IACd,QAASF,EAWJ,SAASG,EAAKC,GACbC,MAAAA,EAAeL,EACfM,EAAa,OACnBN,EAAWM,EACXC,EAAYD,GACNE,MAAAA,EAASJ,EAAG,KAChBK,EAAaH,GACbN,OAAAA,IAEFA,OAAAA,EAAWK,EACJG,EAYF,SAASE,EAAON,GACfC,MAAAA,EAAeL,EACrBA,OAAAA,EACMW,MAAAA,EAAQP,IACdJ,OAAAA,EAAWK,EACJM,EASF,SAASC,EAAYR,GACtBS,IAAAA,EAAYZ,EAChBA,EAAQ,GACFO,MAAAA,EAASJ,IACXU,IAAAA,EAAIb,EACRA,OAAAA,EAAQY,EACRC,EAAEC,QAAQC,IACJA,GAAAA,EAAKC,IAAalB,EAAW,CACzBmB,MAAAA,EAAUF,EAAKC,EACrBD,EAAKC,EAAWlB,EAChBiB,EAAKE,MAGFV,EAWT,SAASW,EAAWR,GACTK,SAAAA,EAAKI,GACa,GAAA,IAArBC,UAAUC,OAKZ,OAJItB,IAAagB,EAAKO,IAAWC,IAAIxB,KACnCgB,EAAKO,IAAWE,IAAIzB,GACpBA,EAAS0B,EAAaC,KAAKX,IAEtBL,EAGLV,GAAAA,EAKF,OAJIe,EAAKC,IAAalB,GACpBE,EAAM0B,KAAKX,GAEbA,EAAKC,EAAWG,EACTA,EAGTT,EAAQS,EAIFQ,MAAAA,EAAgB5B,EACtBA,OAAAA,OAAAA,EAGAgB,EAAKa,EAAgB,IAAIC,IAAId,EAAKO,KAClCP,EAAKa,EAAcd,QAAQgB,GAAaA,EAASC,GAAAA,GACjDhB,EAAKa,EAAcd,QAAQgB,IACpBA,EAASC,GAAQD,MAGxB/B,EAAW4B,EACJjB,EAITK,OAAAA,EAAKiB,IAAAA,EACLjB,EAAKO,IAAa,IAAIO,IAEtBd,EAAKC,EAAWlB,EAETiB,EAiBT,SAASkB,EAASH,EAAUpB,GAUjBwB,SAAAA,IACD9B,MAAAA,EAAeL,EACjBA,GACFA,EAASoC,IAAUT,KAAKQ,GAGpBE,MAAAA,EAAeF,EAAOC,IAE5B3B,OAAAA,EAAa0B,GACbA,EAAOH,GAAAA,EACPhC,EAAWmC,EACXxB,EAAQoB,EAASpB,GAIjB0B,EAAatB,QAAQuB,KACkB,IAAjCH,EAAOC,IAAUG,QAAQD,KAC3BA,EAAEN,GAAAA,KCxKH,SAASQ,EAAgBC,GACvBA,OAAAA,EAASC,OACd,CAACC,EAAKC,IAASD,EAAIE,OAAOD,EAAMJ,EAAgBI,EAAKR,MACrD,IAHG,CD6KiCD,EAAOC,KAC/BrB,QAAQ+B,GAEpB9C,EAAWK,EACJM,EAMAK,SAAAA,IACHmB,OAAAA,EAAOH,EACTG,EAAOT,EAAaX,QAAQgC,GAAKA,KAEjCpC,EAAQwB,IAEHxB,EA/CToB,OAAAA,EAASiB,EAAUb,EAMnB5B,EAAY4B,GACZA,IAgCAnB,EAAKiB,IAAAA,EAWEjB,EAGT,SAAS8B,EAAoBR,GACvBA,EAAEN,GACJM,EAAEZ,EAAaX,QAAQgC,IACjBA,EAAElB,GACJkB,EAAElB,EAAcoB,OAAOX,KAkBxB,SAASY,EAAQ9C,GAClBJ,OAAAA,GACFA,EAASmD,EAAUxB,KAAKvB,GAEnBA,EAQF,SAASgD,EAAUrB,GACxBG,OAAAA,EAASH,GACF,IAAMtB,EAAasB,EAASiB,GAY9B,SAASK,EAAGC,EAAKlD,EAAImD,EAAMC,GAChCF,OAAAA,EAAM,GAAGT,OAAOS,GACTpB,EAAUvB,IACf2C,EAAIvC,QAASgC,GAAMA,KAEfvC,IAAAA,EAASG,EACR6C,OAAAA,IACHhD,EAASE,EAAO,IAAMN,EAAGO,KAG3B6C,GAAAA,EACOhD,GACN+C,GAOE,SAASE,EAAY1B,GAC1BtB,EAAasB,EAASiB,GAGxB,SAASvC,EAAa0B,GACpBA,EAAOC,IAAUrB,QAAQN,GACzB0B,EAAOT,EAAaX,QAAQgC,IAC1BA,EAAExB,IAAW0B,OAAOd,GAChBY,EAAElB,GACJkB,EAAElB,EAAcoB,OAAOd,KAG3BA,EAAOgB,EAAUpC,QAAQ2C,GAAKA,KAC9BnD,EAAY4B,GAGd,SAAS5B,EAAY4B,GAEnBA,EAAOT,EAAe,GACtBS,EAAOC,IAAY,GACnBD,EAAOgB,EAAY;;AEjPc9B,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,QAAAA,ECvCnC,MAuEasC,EAAW,CAACC,EAAGC,EAAOC,EAAQC,KACrCC,IAAAA,EAAW,GACV,IAAA,IAAIC,EAAI,EAAGA,EAAIJ,EAAMvC,OAAQ2C,IAAK,CAC/BC,MAAAA,EAAQL,EAAMI,GACdtD,EAAyB,iBAAVuD,EAAqBJ,EAAOI,GAASA,EACpDC,EAAON,IAAQI,GApET,GAAA,IAsERE,EACFJ,EAAK,GAAKpD,OAEP,GAtEY,IAsERwD,EACPJ,EAAK,GAAKK,OAAOC,OAAON,EAAK,IAAM,GAAIpD,QAEpC,GA/Ea,IA+ETwD,GACNJ,EAAK,GAAKA,EAAK,IAAM,IAAIF,IAAQI,IAAMtD,OAErC,GAjFgB,IAiFZwD,EAAsB,CACzBG,IAAAA,EAAMT,IAAQI,GACdM,GAAQR,EAAK,GAAKA,EAAK,IAAM,IAAIO,GACjCE,EAAQR,EAASM,GAEhBE,GAA2B,mBAAV7D,GAAwC,mBAAT4D,IACnDC,EAASD,GAAQ,CAACA,IAAU,GAE5BR,EAAK,GAAGO,GAAO,WACTG,IAAAA,EAAO,GACN,IAAA,IAAIC,EAAI,EAAGA,EAAIF,EAAMlD,OAAQoD,IAChCD,GAA4B,mBAAbD,EAAME,GAAoBF,EAAME,GAAGC,KAAKC,MAAQJ,EAAME,GAEhED,OAAAA,IAIPD,EACFA,EAAM7C,KAAKhB,GAEXoD,EAAK,GAAGO,IAAS3D,EAAQ,QAGxB,GAAIwD,EAAM,CAEP3D,MAAAA,EAAS,IAAMoD,EAAEiB,MAAM,KAAMlB,EAASC,EAAGjD,EAAOmD,EAAQ,CAAC,GAAI,QAInEC,EAAKpC,KAAwB,mBAAZoC,EAAK,GAAoBvD,EAASA,UAInDuD,EAAKpC,KAAKhB,GAIPoD,OAAAA,GAGIe,EAAQ,SAASC,GAQxBC,IAAAA,EAAMC,EAJNC,EAlIY,EAmIZC,EAAS,GACTC,EAAQ,GACRC,EAAU,CAAC,GAGTC,MAAAA,EAASpB,IACTgB,IAAAA,IAAuBhB,IAAUiB,EAASA,EAAOI,QAAQ,uBAAuB,MAKhFF,EAAQ1D,KAAKuC,GAASiB,EAtIT,GANA,IA+IRD,IAA0BhB,GAASiB,IAKxCE,EAAQ1D,KAAKuC,GAASiB,EA/Id,GAiJVD,EAvJkB,GAAA,IAyJXA,GAAuC,QAAXC,GAAoBjB,EAKrDmB,EAAQ1D,KAAKuC,EArJA,GATG,IAiKXgB,GAA4BC,IAAWjB,EAK5CmB,EAAQ1D,MAAAA,EAnKM,EAmKewD,GAGxBD,GAtKS,KAiLVC,IAAYjB,GAjLF,IAiLWgB,KACvBG,EAAQ1D,KAAKwD,EAAQD,EAAMD,GAC3BC,EAlLe,GAoLbhB,IACFmB,EAAQ1D,KAAKuC,EAAOgB,EAAMD,GAC1BC,EAtLe,IA2LrBC,EAAS,IAGN,IAAA,IAAIlB,EAAE,EAAGA,EAAEc,EAAQzD,OAAQ2C,IAAK,CAC/BA,IApMU,IAqMRiB,GACFI,IAEFA,EAAOrB,IAGJ,IAAA,IAAIS,EAAE,EAAGA,EAAEK,EAAQd,GAAG3C,OAAOoD,IAChCM,EAAOD,EAAQd,GAAGS,GA5MN,IA8MRQ,EACW,MAATF,GAEFM,IAKED,EAAU,CAACA,GAEbH,EAtNW,GAyNXC,GAAUH,EAxNC,IA2NNE,EAEQ,OAAXC,GAA4B,MAATH,GACrBE,EAjOQ,EAkORC,EAAS,IAGTA,EAASH,EAAOG,EAAO,GAGlBC,EACHJ,IAASI,EACXA,EAAQ,GAGRD,GAAUH,EAGI,MAATA,GAAyB,MAATA,EACvBI,EAAQJ,EAEQ,MAATA,GACPM,IACAJ,EArPU,GAuPFA,IAGQ,MAATF,GACPE,EAvPc,EAwPdD,EAAWE,EACXA,EAAS,IAEO,MAATH,IAAiBE,EA3PV,GA2PsD,MAApBH,EAAQd,GAAGS,EAAE,KAC7DY,IA9Pa,IA+PTJ,IACFG,EAAUA,EAAQ,IAEpBH,EAAOG,GAKJA,EAAUA,EAAQ,IAAI1D,KAAKuD,EAhQhB,GAkQdA,EA5QW,GA8QK,MAATF,GAAyB,OAATA,GAA0B,OAATA,GAA0B,OAATA,GAEzDM,IACAJ,EA/QgB,GAkRhBC,GAAUH,GAjRG,IAoRXE,GAAoC,QAAXC,IAC3BD,EApRa,EAqRbG,EAAUA,EAAQ,IAIxBC,OAAAA,IAKOD,GDpRHG,EAAS,IAAIC,IAEbC,EAAU,SAASX,GACnBY,IAAAA,EAAMH,EAAOI,IAAIhB,MAChBe,OAAAA,IACHA,EAAM,IAAIF,IACVD,EAAOK,IAAIjB,KAAMe,KAEnBA,EAAMhC,EAASiB,KAAMe,EAAIC,IAAIb,KAAaY,EAAIE,IAAId,EAASY,EAAMb,EAAMC,IAAWY,GAAMtE,UAAW,KACxFC,OAAS,EAAIqE,EAAMA,EAAI,IAG9BG,EAAS,WACPtF,MAAAA,EAAS,EAAyBqE,MAAMD,KAAMvD,WAChDb,GAAAA,EACF,OAAOuF,MAAMC,QAAQxF,GACjBoE,KAAKpE,GACa,iBAAXA,EACPA,EACAoE,KAAK,CAACpE,KAIE,SAAA,IACRoD,MAAAA,EAAIkC,EAAOG,KAAKrB,MACtB,OAAQA,KAAKsB,MAAQtC,GAAGiB,MAAMjB,EAAGvC;;AElCnC8E,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,QAAAA,EAAAA,QAAAA,EAAAA,EAAAA,QAAAA,GAAAA,EAAAA,QAAAA,KAAAA,EAAAA,QAAAA,IAAAA,EAAAA,OAAAA,eAAAA,QAAAA,IAAAA,CAAAA,YAAAA,EAAAA,IAAAA,WAAAA,OAAAA,EAAAA,KAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,YAAAA,EAAAA,IAAAA,WAAAA,OAAAA,EAAAA,cAAAA,QAAAA,SAAAA,EAAAA,IAAAA,EAAAA,QAAAA,mBAAAA,EAAAA,EAAAA,QAAAA,aAAAA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GCFaA,MAAAA,EAAM,GCLNpG,EAAY,GCWlB,SAAS0B,EAAI2E,EAAQzF,EAAO0F,GAG3BC,MAAAA,ECZD,SAAc3F,GACnB,MAAM4F,WAAEA,GAAe5F,EAClB4F,GAAAA,GAAiC,KAAnB5F,EAAM6F,SAEzB,OAAID,EAAWjF,OAAS,EACfiF,EAAW,GAOb,CACLE,EAHiBhF,EAAId,EAAO,GAAI4F,EAAW,KAVxC,CDUL5F,EETK,SAAkBA,GACF,MAAA,iBAAVA,EACF+F,SAASC,eAAehG,GAE3BA,aAAiBiG,KAIhBjG,EAFEwF,EAAIvC,EAAE7D,EAAWY,GANrB,CFSYA,KAEiBA,EAGlCyF,OAAAA,EAAOS,aAAalG,EAAO0F,GAAWA,EAAQS,YAAcT,GAErDC,EGZF,SAASS,EAAYX,EAAQY,EAAWX,GACtCW,KAAAA,GAAaA,IAAcX,GAAS,CACnCY,MAAAA,EAAID,EAAUE,YAEhBd,IAAWY,EAAUF,YACvBV,EAAOe,YAAYH,GAErBA,EAAYC,GCuChB,SAASG,EAAWC,GAEXzC,OAAAA,KAAK0C,EAAWD,EAAElD,MAAMkD,GC7C1B,SAASE,EAAQC,EAASC,GAC1B,IAAA,IAAIxD,KAAKuD,EAASrB,EAAIlC,GAAKuD,EAAQvD,GAExC,OAAA,WACQF,MAAAA,EAAOgC,MAAM2B,KAAKrG,WACpBsG,IAAAA,EAwCJ5D,OAAAA,EAAKhD,QAtCI6G,SAAAA,EAAKC,GACD,GAAA,MAAPA,QACC,GAAmB,iBAARA,EACVF,EACFlG,EAAIkG,EAAIE,GAGNF,EADEF,EACGf,SAASoB,gBAAgB,6BAA8BD,GAEvDnB,SAASqB,cAAcF,QAG3B,GAAI9B,MAAMC,QAAQ6B,GAElBF,IAAIA,EAAKjB,SAASsB,0BACvBH,EAAI9G,QAAQ6G,QACP,GAAIC,aAAejB,KACpBe,EACFlG,EAAIkG,EAAIE,GAGRF,EAAKE,OAEF,GAAmB,iBAARA,EAChB1B,EAAI8B,SAASN,EAAIE,EAAK,KAAMJ,QACvB,GAAmB,mBAARI,EACZF,GAAAA,EAAI,CACAtB,MAAAA,EAAU5E,EAAIkG,EAAI,IACxBxB,EAAI+B,OAAOP,EAAIE,EAAKxB,QAGpBsB,EAAKE,EAAIhD,MAAM,KAAMd,EAAKoE,OAAO,SAGnC1G,EAAIkG,EAAI,GAAKE,KAKVF,GCrCJ,SAAS/D,IACPuC,OAAAA,EAAIvC,EAAEiB,MAAMsB,EAAIvC,EAAGvC,WAIrB,SAAS+G,IACPjC,OAAAA,EAAIiC,GAAGvD,MAAMsB,EAAIiC,GAAI/G,WAIvB,SAASgH,IACPC,OAAAA,EAAIzD,QAAAA,MAAMjB,EAAGvC,WAIf,SAASkH,IACPD,OAAAA,EAAIzD,QAAAA,MAAMuD,EAAI/G,WT5BvB8E,QAAAA,IAAAA,EAAAA,EAAI+B,OUHG,SAAgBP,EAAIhH,EAAO0F,EAAShB,EAAS2B,GAElDW,OAAAA,EAAMtB,GAAWA,EAAQS,YAAea,EAIxCX,EAAYA,GAAa3B,aAAmBuB,MAAQvB,EAEhD1E,IAAU0E,IAEVA,GAA8B,iBAAZA,KACF,iBAAV1E,GAAwC,iBAAVA,IAAuBA,GAAS,KAkB5C,mBAAVA,EAChBwF,EAAI/C,UAAAA,WACFiC,EAAUc,EAAI+B,OAAOP,EAAIhH,EAAMgE,KAAK,CAAEgD,GAAAA,EAAItB,QAAAA,IAAYA,EAAShB,EAAS2B,MAItEX,EAEEhB,IACG2B,IAEHA,EAAa3B,EAAQmD,GAAcnD,EAAQmD,EAAWtB,aACjDb,EAAQoC,iBAEf1B,EAAYY,EAAIX,EAAWX,IAG7BsB,EAAGe,YAAc,GAEnBrD,EAAU,KAEN1E,IAAAA,IAASA,IACX0E,EAAU5D,EAAIkG,EAAIhH,EAAO0F,MArCZ,MAAXhB,GAAoBsC,EAAGgB,WAQrBtC,GACDA,EAAQoC,iBAAmBd,EAAGiB,WAAW5H,KAAOL,EAEjDgH,EAAGgB,WAAW3H,KAAOL,EAVnB0F,EACF5E,EAAIkG,EAAIhH,EAAO0F,GAGfsB,EAAGe,YAAc/H,EASrB0E,EAAU1E,IA2BL0E,GVnDTc,EAAI8B,SONG,SAAkBN,EAAIhH,EAAOkI,EAAMC,EAAQC,GACnC,GAAA,MAATpI,EACJ,IAAKkI,GAAkB,UAATA,IAAqBC,GAAAA,GACjC,IAAKD,KAAQlI,EACXwF,EAAI8B,SAASN,EAAIhH,EAAMkI,GAAOA,EAAMC,EAAQC,OAEzB,MAAZF,EAAK,IAA0B,MAAZA,EAAK,IAAelI,EAAMsB,GAI5B,mBAAVtB,EAChBwF,EAAI/C,UAAAA,WACF+C,EAAI8B,SAASN,EAAIhH,EAAMgE,KAAK,CAAEgD,GAAAA,EAAIkB,KAAAA,IAASA,EAAMC,EAAQC,KAElDA,EACTpB,EAAGqB,MAAMC,YAAYJ,EAAMlI,GAE3BmI,GACqB,UAArBD,EAAKK,MAAM,EAAG,IACO,UAArBL,EAAKK,MAAM,EAAG,GAEdvB,EAAGwB,aAAaN,EAAMlI,GACJ,UAATkI,EACY,iBAAVlI,EACTgH,EAAGqB,MAAMI,QAAUzI,EAEnBwF,EAAI8B,SAASN,EAAIhH,EAAO,KAAMmI,GAAAA,IAGnB,UAATD,IAAkBA,GAAQ,QAC9BlB,EAAGkB,GAAQlI,GAIf,SAAqBgH,EAAIkB,EAAMlI,GAC7BkI,EAAOA,EAAKK,MAAM,GAAGG,cAEjB1I,EACFgH,EAAG2B,iBAAiBT,EAAMzB,GAE1BO,EAAG4B,oBAAoBV,EAAMzB,IAG9BO,EAAGL,IAAeK,EAAGL,EAAa,KAAKuB,GAAQlI,EATlD,CAzBgBgH,EAAIkB,EAAMlI,IPF1BwF,EAAI1E,IAAMA,EACV0E,EAAIqD,GAAKzC,ESKTZ,EAAIvC,EAAI2D,EAAQ,CAAEnE,UAAAA,EAAF,UAAaF,QAAAA,EAAb,QAAsB/C,KAAAA,EAAtB,KAA4BO,OAAAA,EAAAA,SAC5CyF,EAAIiC,GAAKb,EAAQ,CAAEnE,UAAAA,EAAF,UAAaF,QAAAA,EAAb,QAAsB/C,KAAAA,EAAtB,KAA4BO,OAAAA,EAAAA,SAAAA;;8gCEhB7C,SAAS+I,EAAe1F,GAGtB,IAAA,IAAA,EAFO2F,EAA4B3F,EAAAA,GAAhB4F,EAAgB5F,EAAAA,MAAAA,GAC7BvD,EAAS,GAAA,EAAA,EACUkJ,EAAQE,aAAAA,EAAAA,KAAAA,MAAW,CAAA,IAAA,EAAA,EAAA,MAAhCC,EAAAA,EAAAA,GAAOC,EAAAA,EAAAA,GACP,KAANA,GACFtJ,EAAOmB,KAAKmI,GAEd,IAAIjC,EAAM8B,EAAaE,QAAAA,IACZhC,GACTrH,EAAOmB,KAAKkG,GAGhB,OAAOrH,EAGT,IAAIuJ,EAAa,IAAIC,OAAO,IAAI,KAEhC,SAASC,EAAqBC,EAAa/F,GACzC,SAASgG,IAAAA,IAAAA,EAAoBpG,EAAAA,GAAAA,MAAAA,KAAAA,WACtBpD,EAASoD,EAATpD,GAAAA,EACiBiE,KAAKwF,iBAArBC,EAAAA,EAAAA,MAAO5F,EAAAA,EAAAA,KACb,YAAA,IAAW9D,UACT0J,EAAAA,EAAAA,GAAaA,IACA5F,GACN6F,EAAc,CAAED,MAAAA,EAAO5F,KAAM,SAE7BsB,MAAMC,QAAQrF,IAAUyD,OAAOmG,SAAS5J,GAC/CA,EAAQ8I,EAAe1F,GAAMyG,KAAK,IAE3BzG,EAAKzC,OAAS,IACrBX,EAAQoD,GAGHuG,EAAc,CAAED,MADvBA,EAAAA,EAAAA,GAAaA,IAAAA,EAAAA,IAAQ5F,GAAO9D,EAAAA,IACE8D,KAAM,QAEtC,SAASgG,EAAeJ,GAGtB,OAAOC,EAAc,CAAED,MADvBA,EAAAA,EAAAA,GAD+BzF,KAAKwF,iBAA9BC,MACyBA,GACD5F,KAAM,OAEtC,SAAS6F,EAAcI,GACrB,IAAIC,EAAU,IAAIC,MAAM,aAAW,CACjC/F,MAAAA,SAAMgG,EAAQC,EAASrI,GAAAA,IACf4H,EAAUM,EAAQP,iBAAlBC,MACN,GAA0B,mBAAfA,EAAMU,KAAqB,CACpC,IAAIA,EAAOV,EAAMU,YACVV,EAAMU,KACb,IAAIvK,EAASuK,EAAKJ,EAASlI,GAE3B,OADA4H,EAAMU,KAAOA,EACNvK,EAPsB,IAAA,EAS1BwK,EAASvI,EAAAA,GACVsD,MAAMC,QAAQgF,IAAU5G,OAAOmG,SAASS,KAC1CvI,EAAWgH,EAAehH,IAExBsD,MAAMC,QAAQqE,EAAM5H,aAAAA,EACtB4H,EAAM5H,UAASd,KAAAA,MAAAA,EAAQc,GACvBA,EAAW4H,EAAM5H,gBACV4H,EAAM5H,UAEf,IAAK,IAAIwB,EAAI,EAAGA,EAAIxB,EAASnB,OAAQ2C,IAAK,CACxC,IAAI4D,EAAMpF,EAASwB,GACA,mBAAR4D,GAAsBA,EAAIuC,mBACnC3H,EAASwB,GAAK4D,KAGlB,OAAOqC,EAAAA,WAAAA,EAAAA,CAAY/F,EAAMkG,GAAAA,OAAU5H,KAErCmD,IAAAA,SAAIiF,EAAQpG,GACV,IAAMjE,EAASqK,EAAOpG,GACtB,YAAA,IAAWjE,EACFA,EAEI,UAATiE,EACKgG,EAEgB,iBAAThG,IACY,IAAvBA,EAAKlC,QAAQ,OACdkC,EAAOA,EAAKc,QAAQwE,EAAY,MAE9BtF,EAAKwG,SAAS,UAAYxG,EAAKnD,OAAS,EACnCuJ,EAAOT,iBAAiBC,MAAM5F,EAAKyE,MAAM,GAAI,KAEtD2B,EAAOT,iBAAiB3F,KAAOA,EACxB0F,SAAAA,KAKb,OADAQ,EAAQP,iBAAmBM,EACpBC,EAET,OAAOL,EAAc,CAAED,MAAO,GAAI5F,KAAM,OAAA,OAAA,QAI1C,SAAkByF,EAAagB,GAC7B,QAAA,IAD6BA,IAAAA,EAAQ,IACV,mBAAhBhB,EACT,MAAMiB,MAAM,0EAEd,GAAID,EAAM5J,OAAS,EAAG,CAEpB,IADA,IAAA,EAAI8J,EAAW,GAAA,EAAA,EACOF,KAAAA,EAAAA,KAAAA,MACpBE,EAASzJ,KAAKsI,EAAqBC,EAAAA,EAAAA,QAErC,OAAOkB,EAGP,OAAA,IAAWR,MAAM,aAAW,CAC1BhF,IAAAA,SAAIiF,EAAQpG,GACV,IAAMjE,EAASqK,EAAOpG,GACtB,YAAA,IAAWjE,EACFA,GAETqK,EAAOpG,GAAQwF,EAAqBC,EAAazF,GAC1CoG,EAAOpG;;AC1Ff,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,KAAA,QAAA,OAAA,QAAA,IAAA,QAAA,GAAA,QAAA,GAAA,QAAA,MAAA,QAAA,MAAA,QAAA,MAAA,QAAA,EAAA,QAAA,OAAA,QAAA,OAAA,QAAA,MAAA,QAAA,IAAA,QAAA,GAAA,QAAA,QAAA,QAAA,KAAA,QAAA,SAAA,QAAA,OAAA,QAAA,EAAA,QAAA,UAAA,EAxBP,IAAA,EAAA,QAAA,WACA,EAAA,EAAA,QAAA,cAuBO,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAHH,IAAA,GAAA,EAAS0B,EAAAA,SAAAA,EAAIvC,IAAAA,GAjBfyH,EAAAA,EAAAA,KACAC,EAAAA,EAAAA,EACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,SACAC,EAAAA,EAAAA,KACAC,EAAAA,EAAAA,QACAC,EAAAA,EAAAA,GACAC,EAAAA,EAAAA,IACAC,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,EACAC,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,GACAC,EAAAA,EAAAA,GAIK,QAAA,GAAA,EAAA,QAAA,GAAA,EAAA,QAAA,MAAA,EAAA,QAAA,MAAA,EAAA,QAAA,MAAA,EAAA,QAAA,EAAA,EAAA,QAAA,OAAA,EAAA,QAAA,OAAA,EAAA,QAAA,MAAA,EAAA,QAAA,IAAA,EAAA,QAAA,GAAA,EAAA,QAAA,QAAA,EAAA,QAAA,KAAA,EAAA,QAAA,SAAA,EAAA,QAAA,OAAA,EAAA,QAAA,EAAA,EAAA,QAAA,KAAA,EAFwB,IAAA,GAAA,EAASlG,EAAAA,SAAAA,EAAIiC,IAAAA,IAA7BG,EAAAA,EAAAA,IAAK+D,EAAAA,EAAAA,OAEb,QAAA,OAAA,EAAA,QAAA,IAAA,EAAA,IAAMC,EAAO,WAAIC,IAClBC,IAAAA,EAAW,IAAIC,iBADGF,EAAAA,UAAAA,OAAAA,EAAa,IAAA,MAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAAbA,EAAa,GAAA,UAAA,GAK5BC,OAHPD,EAASzL,QAAQ,SAAC4L,GAChBF,EAASG,OAAOD,KAEXF,GALF,QAAA,KAAA;;;;ACpBA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EAJP,IAAA,EAAA,QAAA,eAEA,QAAA,cAEO,IAAMI,EAAO,SAA4B,GAAbpK,IAAZqK,IAAAA,EAAAA,EAAAA,MAAYrK,EAAAA,UAAAA,OAAAA,EAAa,IAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAAbA,EAAa,EAAA,GAAA,UAAA,GACvCiJ,OAAAA,EAAQqB,QAAAA,MAAM,QAAUD,EAAMvH,QAAQ,IAAK,KAA3CmG,EAAiD,EAAGoB,EAAAA,IAAAA,GAAQrK,IAD9D,QAAA,KAAA;;ACEA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EANP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,eACA,EAAA,QAAA,sBAEA,QAAA,iBAEO,IAAMuK,EAAU,WACjBC,IAAAA,GAAQ,EAAE,EAAA,GAAA,GAEP,OAAA,EACL,EAAA,MAAA,CAAEH,MAAO,WACTG,EACA1B,EAAO2B,OAAAA,QAAQ,WAAMD,OAAAA,EAAMA,IAAU,IAArC1B,CAAyC,OANtC,QAAA,QAAA;;ACuBA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,0BAAA,EA7BP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,eACA,EAAA,QAAA,sBAIA,SAAS4B,EAAMlG,GACNmG,OAAAA,OAAOnG,EAAEoG,QAAQ,IAG1B,SAASC,EAAQrG,GACX,MAAA,SAASsG,KAAKtG,GAAWA,EAAEiC,MAAM,GACjC,UAAUqE,KAAKtG,GAAW,IAAMA,EAAEiC,MAAM,GACrCjC,EAGT,SAASuG,EAAKC,GACLN,OAAAA,EAAO,EAAI,GAAMM,EAAI,OAAS,MAEvC,SAASC,EAAKhK,GACLyJ,OAAAA,EAAO,IAASzJ,EAAI,KAAO,GAhBpC,QAAA,8BAkBA,IAAIiK,EAAI,eACR,SAASC,EAAQC,GACX,QAAA,UAAUN,KAAKM,MACf,iBAAiBN,KAAKM,GAIrB,IAAMC,EAAuB,WAC9BpK,IAAAA,GAAI,EAAE,EAAA,GAAA,GACN+J,GAAI,EAAE,EAAA,GAAA,IAKJtL,EAAS,SAACkF,EAAGK,EAAMqG,EAAInI,GACvBjF,IAAAA,EAAQ0G,EAAEwD,OAAOlK,MAChBiN,EAAQjN,KAEb+G,EADA/G,EAAQ2M,EAAQ3M,IAEhBoN,EAAGnI,EAAIjF,MAGF,OAAA,EACL,EAAA,MAAA,CAAEmM,MAAO,0BACT,EAAKjB,EAAAA,MAAAA,EAAMlL,MAAAA,MAAM+C,GAAGsK,QAbF,SAAC3G,GAAMlF,OAAAA,EAAOkF,EAAG3D,EAAG+J,EAAGC,KAaC,WAC1C,KACA,EAAK7B,EAAAA,MAAAA,EAAMlL,MAAAA,MAAM8M,GAAGO,QAdF,SAAC3G,GAAMlF,OAAAA,EAAOkF,EAAGoG,EAAG/J,EAAG8J,KAcC,gBAnBvC,QAAA,qBAAA;;ACLA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,kBAAA,EAxBP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,sBACA,EAAA,QAAA,eACA,EAAA,QAAA,sBAqBO,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,MAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,MAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,MAAA,IAAA,OAAA,OAAA,OAAA,iBAAA,EAAA,CAAA,IAAA,CAAA,MAAA,OAAA,OAAA,OApBP,QAAA,sBAEA,IAAIS,EAAY,CACX,EAAA,iBACA,EAAA,iBAGL,SAASC,EAAUC,GACbC,IAAAA,EAAUD,EAAWE,MAAM,KAAKC,UAChCF,OAAsB,IAAtBA,EAAQ,GAAG9M,QAAsC,IAAtB8M,EAAQ,GAAG9M,SAG/B,IAAIiN,KAAKH,EAAQ5D,KAAK,MACrBgE,YAAa,GAG3B,SAASC,EAAeC,GACfA,OAAAA,EAAKC,cAAczF,MAAM,EAAG,IAAImF,MAAM,KAAKC,UAAU9D,KAAK,KAG5D,IAAMoE,EAAe,WACtBC,IAAAA,GAAa,EAAE,EAAA,GAAA,GACfC,GAAY,EAAEL,EAAAA,GAAAA,EAAe,IAAIF,OACjCQ,GAAa,EAAEN,EAAAA,GAAAA,EAAe,IAAIF,OAElCS,GAAS,EAAE,EAAA,GAAA,WAAM,OAACd,EAAUY,OAC5BG,GAAS,EAAE,EAAA,GAAA,WAAM,OAACf,EAAUa,OAC5BG,GAAS,EAAE,EAAA,GAAA,WAAMhB,OAAAA,EAAUa,KAAgBb,EAAUY,OAErDK,GAAuB,EAAE,EAAA,GAAA,WAAMH,OAAAA,KAAYC,KAAYC,MACvDE,GAAW,EAAE,EAAA,GAAA,WAAMP,OAAiB,IAAjBA,MACnBQ,GAAiB,EAAE,EAAA,GAAA,WAAOL,OAAAA,IAAW,QAAU,KAC/CM,GAAkB,EAAE,EAAA,GAAA,WAAOL,OAAAA,IAAW,QAAU,KAY7C,OAAA,EACL,EAAA,MAAA,CAAEnC,MAAO,kBACT,EACEhB,EAAAA,KAAAA,EAAOnL,OAAAA,MAAMkO,GAAYU,SAAS,SAAClI,GAAMwH,OAAAA,EAAWxH,EAAEwD,OAAOlK,QAA7DmL,CACEC,EAAOpL,OAAAA,MAASsN,IAAhBlC,CAAgBkC,EAAU,IAC1BlC,EAAOpL,OAAAA,MAASsN,IAAhBlC,CAAgBkC,EAAU,KAE5BpC,EACGlL,MAAAA,MAAMmO,GACN/B,MAAMsC,GACNrB,QAAQ,SAAC3G,GAAMyH,OAAAA,EAAUzH,EAAEwD,OAAOlK,SACrCkL,EACGlL,MAAAA,MAAMoO,GACNhC,MAAMuC,GACNtB,QAAQ,SAAC3G,GAAM0H,OAAAA,EAAW1H,EAAEwD,OAAOlK,SACnC6O,SAASJ,GACZ7D,EAAO2B,OAAAA,QA1BFuC,WACHC,IAAAA,EAAc,CACb,EAAA,QAAUZ,IACV,EAAA,SAAWA,IAAc,OAASC,KAEvCY,MACE,qBAAuB1B,EAAUY,KAAgBa,EAAYb,QAoBxCW,SAASL,EAA9B5D,CAAoD,WAxCnD,QAAA,aAAA;;ACjBA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EAPP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,sBACA,EAAA,QAAA,sBACA,EAAA,QAAA,eAIO,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,UAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,aAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,MAAA,IAAA,OAAA,OAAA,OAAA,iBAAA,EAAA,CAAA,IAAA,CAAA,MAAA,OAAA,OAAA,OAFP,QAAA,eAEO,IAAMqE,EAAQ,WACbC,IAOFC,EALAC,GAAW,EAAE,EAAA,GAAA,KACbC,GAAoB,EAAE,EAAA,GAAA,WAAM,OAACD,IAAa,KAAM1C,QAAQ,KACxD4C,GAAQ,EAAZ,EAAA,KACIC,GAAO,EAAX,EAAA,KACIlE,GAAI,EAAE,EAAA,GAAA,WAAM,OAACkE,IAASD,KAAWF,MAQ5BI,SAAAA,IACPC,cAAcN,GACdG,GAAM,IAAI1B,MAAOC,WACjB0B,EAAKD,KACLH,EAROO,YAAY,WACjBH,GAAK,IAAI3B,MAAOC,YACf,IAWE,OAFP2B,KAEO,EACL,EAAA,MAAA,CAAErD,MAAO,SACTlB,EAAImB,IAAAA,MACF,IADFnB,CACE,gBACAJ,EAAS7K,SAAAA,MAAMqL,GACfJ,EAAImB,IAAAA,MAAgBiD,IAApBpE,CAAoBoE,GACpB,YACAnE,EAAM1H,MAAAA,KACHmM,KAAAA,IAAI,GACJC,IAhCK,KAiCL5P,MAAMoP,GACN/B,QAAQ,SAAC3G,GAAM0I,OAAAA,EAAS1I,EAAEwD,OAAOlK,SACpC4K,EAAO2B,OAAAA,QAAQiD,EAAf5E,CAA2B,kBApC1B,QAAA,MAAA;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EAPP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,sBACA,EAAA,QAAA,eACA,EAAA,QAAA,sBAIO,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,MAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,MAAA,IAAA,OAAA,OAAA,OAAA,iBAAA,EAAA,CAAA,IAAA,CAAA,MAAA,OAAA,OAAA,OAFP,QAAA,cAEO,IAAMiF,EAAO,WACdC,IAAAA,GAAS,EAAE,EAAA,GAAA,IACX7G,GAAU,EAAE,EAAA,GAAA,EACd,EAAE,EAAA,GAAA,CAAC,OAAQ,cACX,EAAE,EAAA,GAAA,CAAC,SAAU,aACb,EAAE,EAAA,GAAA,CAAC,SAAU,YAEX8G,GAAkB,EAAE,EAAA,GAAA,WACtB,OAEA9G,IACG+G,IAAI,SAACC,EAAO3M,GAAM,MAAA,CAAC2M,IAAQ,GAAIA,IAAQ,GAAI3M,KAC3C4M,OAAO,SAACD,GACPA,OAAAA,EAAM,GAAGvH,cAAcyH,WAAWL,IAASpH,mBAG7CR,GAAO,EAAE,EAAA,GAAA,IACTkI,GAAU,EAAE,EAAA,GAAA,IACZC,GAAW,EAAE,EAAA,IAAC,GAkBX,OAjBG,EAAA,EAAA,WAAA,WACRP,IACAO,GAAU,MAeL,EACL,EAAA,MAAA,CAAElE,MAAO,QACTlB,EAAImB,IAAAA,MACF,IADFnB,CACE,iBACAC,EAAMlL,MAAAA,MAAM8P,GAAQzC,QAAQ,SAAC3G,GAAMoJ,OAAAA,EAAOpJ,EAAEwD,OAAOlK,SACnDmL,EAAOnL,OAAAA,MAAMqQ,GAAUhD,QAAQ,SAAC3G,GAAM2J,OAAAA,EAAS3J,EAAEwD,OAAOlK,SACrDsQ,KAAQ,IADXnF,CACW,WACT4E,OAAAA,IAAkBC,IAAI,SAACC,GACrB7E,OAAAA,EAAOpL,OAAAA,MAAMiQ,EAAM,GAAnB7E,CAAuB6E,EAAM,GAAK,KAAOA,EAAM,SAGnD,EACE,EAAA,KAAA,QACA/E,EAAMlL,MAAAA,MAAMkI,GAAMmF,QAAQ,SAAC3G,GAAMwB,OAAAA,EAAKxB,EAAEwD,OAAOlK,SAC/C,WACAkL,EAAMlL,MAAAA,MAAMoQ,GAAS/C,QAAQ,SAAC3G,GAAM0J,OAAAA,EAAQ1J,EAAEwD,OAAOlK,UAEvDiL,EAAImB,IAAAA,MACFxB,IADFK,CACEL,EAAO2B,OAAAA,QA9BJgE,WACPtH,EAAQA,IAAU/G,QAAO,EAAE,EAAA,GAAA,CAACgG,IAAQkI,SA6BhCxF,CAA8B,UAC9BA,EAAO2B,OAAAA,QA5BJiE,WAEPH,KAAc,GAAKpH,IAAUoH,KAAY,CAACnI,IAAQkI,OA0B9CxF,CAA8B,UAC9BA,EAAO2B,OAAAA,QAzBJkE,WAEPJ,KAAc,GAAKpH,EAAQA,IAAUiH,OAAO,SAACD,EAAO3M,GAAMA,OAAAA,GAAK+M,QAuB3DzF,CAA8B,cAxD/B,QAAA,KAAA;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,kBAAA,EAPP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,sBACA,EAAA,QAAA,eACA,EAAA,QAAA,sBAIO,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,WAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,UAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,UAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,UAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,+BAAA,cAAA,MAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,MAAA,IAAA,OAAA,OAAA,OAAA,iBAAA,EAAA,CAAA,IAAA,CAAA,MAAA,OAAA,OAAA,OAAA,SAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,KAAA,GAAA,GAAA,OAAA,sBAAA,CAAA,IAAA,EAAA,OAAA,sBAAA,GAAA,IAAA,EAAA,EAAA,OAAA,SAAA,GAAA,OAAA,OAAA,yBAAA,EAAA,GAAA,cAAA,EAAA,KAAA,MAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,UAAA,OAAA,IAAA,CAAA,IAAA,EAAA,MAAA,UAAA,GAAA,UAAA,GAAA,GAAA,EAAA,EAAA,EAAA,OAAA,IAAA,GAAA,QAAA,SAAA,GAAA,EAAA,EAAA,EAAA,EAAA,MAAA,OAAA,0BAAA,OAAA,iBAAA,EAAA,OAAA,0BAAA,IAAA,EAAA,OAAA,IAAA,QAAA,SAAA,GAAA,OAAA,eAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,MAAA,OAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAFP,QAAA,sBAEO,IAAM8F,EAAe,WACpBC,IAAAA,EAAc,GAEhBC,GAAO,EAAE,EAAA,GAAA,GACTC,GAAY,EAAE,EAAA,GAAA,EAAC,EAAE,EAAA,GAAA,MACjBC,GAAS,EAAEH,EAAAA,GAAAA,GACXI,GAAW,EAAE,EAAA,IAAA,GACbC,GAAU,EAAE,EAAA,GAAA,IAgBPC,SAAAA,EAAiBvK,GACxBA,EAAEwK,iBACFxK,EAAEyK,kBACEpO,IAAAA,EAAI2D,EAAEwD,OACV6G,EAAS,CACPK,EAAGrO,EAAEsO,GAAGC,QAAQtR,MAChBuR,EAAGxO,EAAEyO,GAAGF,QAAQtR,MAChBgN,EAAGjK,EAAEiK,EAAEsE,QAAQtR,QAEjB8Q,EAAOC,IAAW/D,GAWXyE,SAAAA,EAAYC,GACfC,IAAAA,EAAed,IAAYtI,MAAM,EAAGqI,IAAS,GACjDe,EAAa3Q,KAAK0Q,GAClBb,EAAUc,GACVf,EAAKA,IAAS,GAWPgB,SAAAA,IACHd,MAAaC,IAAW/D,IAC1B+D,GAAS,GACTD,EAAOH,GACPc,GAAY,EAAET,EAAAA,GAAAA,IAAUzI,WAE1BwI,GAAS,IAxDD,EAAA,EAAA,WAAA,WAAMC,OAAAA,EAAQH,IAAYD,WAC1B,EAAA,EAAA,WAAA,WACJG,GAAAA,IAAY,CACVc,IAAAA,GAAgB,EAAOb,EAAAA,QAAAA,GAASc,UAClC,SAAC/O,GAAMA,OAAAA,EAAEqO,IAAML,IAAWK,GAAKrO,EAAEwO,IAAMR,IAAWQ,IAEhDQ,GAAa,EAAOf,EAAAA,QAAAA,GAASzI,QACjCwJ,EAAWF,GACN,EAAA,IAAA,EAAOb,EAAAA,QAAAA,GAASa,GADrB,CAEE7E,EAAGP,OAAOqE,OAEZE,EAAQe,MAyFLC,OAlBM,EACX,EAAA,MAAA,CAAE7F,MAAO,iBACTlB,EAAImB,IAAAA,MACFnB,IADFA,CACEA,EAAImB,IAAAA,MACFxB,IADFK,CACEL,EAAOiE,OAAAA,SAAS,WAAM,OAAC+B,MAAQrE,QA5C5B0F,WACPrB,EAAKsB,KAAKtC,IAAIgB,IAAS,EAAG,KA2CtBhG,CAA6C,QAC7CA,EAAOiE,OAAAA,SAAS,WAAM+B,OAAAA,MAAWC,IAAYlQ,OAAS,IAAG4L,QAzCtD4F,WACPvB,EAAKsB,KAAKvC,IAAIiB,IAAS,EAAGC,IAAYlQ,OAAS,KAwC3CiK,CACE,SAGJK,EAAImB,IAAAA,MACFxE,IADFqD,CACErD,EAAI2E,IAAAA,QAjED6F,SAAU1L,GACb0K,IAAAA,EAAI1K,EAAE2L,OACNd,EAAI7K,EAAE4L,OACNZ,EAAcV,IAAUzI,QAC5BmJ,EAAY1Q,KAAK,CAAEoQ,EAAAA,EAAGG,EAAAA,EAAGvE,EAAG2D,IAC5Bc,GAAY,EAAEC,EAAAA,GAAAA,KA4DV9J,CAAuB,WACrBoJ,OAAAA,IAAUhB,IAAI,SAACjN,GAAMwP,OAnBX,SAAA,GAAGxP,IAAAA,EAAAA,EAAAA,EAAGkO,EAAAA,EAAAA,iBACtBtF,OAAAA,EAAO0F,OAAAA,GAAGtO,EAAEqO,GAAGI,GAAGzO,EAAEwO,GAAGvE,EAAEjK,EAAEiK,GAAGwF,KAAYC,KAAAA,OACvClG,KAAAA,QAAQ,SAAC7F,GACRA,EAAEwK,iBACFxK,EAAEyK,oBAEHuB,cAAczB,GAaUsB,CAAU,CAAExP,EAAAA,EAAGkO,iBAAAA,SAGxC,WAAMF,OAAAA,MApCR,EACE9F,EAAAA,MAAAA,EAAImB,IAAAA,MAAeG,KAAAA,QAAQqF,EAA3B3G,GACAA,EAAImB,IAAAA,MACFf,IADFJ,EACEI,EAAAA,EADF,GACkC,IAAA,WAAM0F,OAAAA,IAAWK,GAC/C,WAAML,OAAAA,IAAWQ,KACnB,EAAET,EAAAA,GAAAA,GACF5F,EAAM1H,MAAAA,KACHmM,KAAAA,IAAI,GACJC,IAAI,KACJ5P,MAAM8Q,GACNzD,QAAQ,SAAC3G,GAAMoK,OAAAA,EAAOpK,EAAEwD,OAAOlK,eA9EnC,QAAA,aAAA;;ACPA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,gBAAA,EAAA,IAAI2S,EAAa,CACtBC,GAAI,OACJC,GAAI,KACJC,GAAI,KACJC,GAAI,OACJC,GAAI,KACJC,GAAI,MACJC,GAAI,UACJC,GAAI,SACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,IAAK,gBACLC,IAAK,cACLC,GAAI,UACJC,GAAI,SACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,eACJC,GAAI,aACJC,IAAK,eACLC,IAAK,aACLC,IAAK,iBACLC,IAAK,eACLC,IAAK,gBACLC,IAAK,cACLC,IAAK,QACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OA9CA,QAAA,WAAA;;AC0HJ,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EA1HH,IAAA,EAAA,QAAA,sBA0HG,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAxHUC,IAAAA,EAwHV,WAvHWC,SAAAA,EAAAA,EAAOC,EAASC,GAAM,IAAA,EAAA,KAAA,EAAA,KAAA,GAC3BC,KAAAA,MAAQ,GACRH,KAAAA,MAAQA,EACRC,KAAAA,QAAUA,EACVC,KAAAA,KAAOA,EACPE,KAAAA,WAAa,CAChBC,IAAK,SAACrL,EAAGsL,GAAMtL,OAAAA,EAAIsL,GACnBC,IAAK,SAACvL,EAAGsL,GAAMtL,OAAAA,EAAIsL,GACnBE,IAAK,SAACxL,EAAGsL,GAAMtL,OAAAA,EAAIsL,GACnBhL,IAAK,SAACN,EAAGsL,GAAMtL,OAAAA,EAAIsL,GACnBG,IAAK,SAACzL,EAAGsL,GAAMtL,OAAAA,EAAIsL,GACnBI,IAAK,SAAC1L,EAAGsL,GAAMtL,OAAAA,KAAAA,IAAAA,EAAKsL,MAGZ,EAAA,EAAA,WAAA,WAAM,OAAA,EAAKH,MAAQ,EAAKH,UAyGnC,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,mBAtGgBW,MAAAA,SAAAA,EAASC,GACpB1W,IAAAA,EAAS,GAMNA,OALPyW,EAAQlW,QAAQ,SAAAoW,GACdD,EAAQnW,QAAQ,SAAAqW,GACd5W,EAAOmB,KAAKwV,EAASC,OAGlB5W,IA+FR,CAAA,IAAA,eA5FY6W,MAAAA,SAAAA,EAAKpH,EAAOqH,GACnBC,IAAAA,EAASF,EAAI9U,QAAQ0N,GACrBuH,EAAOH,EAAI9U,QAAQ+U,GACnBC,OAAW,GAAXA,IAAyB,GAATC,GAAcD,EAASC,EAAa,GACjDH,EAAInO,MAAMqO,EAAQC,EAAO,KAwFjC,CAAA,IAAA,WArFQC,MAAAA,SAAAA,EAAYC,GACnBD,EAAa,KAAKE,aAAaF,GAC/BC,EAAW,KAAKC,aAAaD,GACzBT,IAAAA,EAAU,KAAKW,aAAa,KAAKrB,QAASkB,EAAW,GAAIC,EAAS,IAClER,EAAU,KAAKU,aAAa,KAAKpB,KAAMiB,EAAW,GAAIC,EAAS,IAC5D,OAAA,KAAKG,iBAAiBZ,EAASC,KAgFvC,CAAA,IAAA,eA7EYY,MAAAA,SAAAA,GACJ,MAAA,CAACA,EAAQC,MAAM,aAAa,GAAI3K,OAAO0K,EAAQC,MAAM,OAAO,OA4EpE,CAAA,IAAA,iBAzEcC,MAAAA,SAAAA,EAAIP,EAAYC,GAAU,IAAA,EAAA,KACnC,OAAE,KAAKO,aAAaR,IAAe,KAAKQ,aAAaP,GAG7C,KAAKQ,SAAST,EAAYC,GAGnC/G,IAAI,SAAAwH,GAAW/K,OAAAA,OAAO,EAAKgL,MAAM,EAAK3B,MAAM0B,SAC5CzV,OAAO,KAAKgU,WAAWsB,IANjB,KAAKK,iBAuEf,CAAA,IAAA,kBA9DeL,MAAAA,SAAAA,EAAIM,EAAUC,GACxBvN,IAAAA,EAAQ,KAAKwN,aAAaF,GAC1BG,EAAS,KAAKD,aAAaD,GAE3BvN,OAAU,OAAVA,GAA6B,OAAXyN,EAAwB,KAAKJ,eAE5C,KAAK3B,WAAWsB,GAAIhN,EAAOyN,GAAQC,aAwD3C,CAAA,IAAA,eArDYZ,MAAAA,SAAAA,GACJ,MAAA,eAAevK,KAAKuK,KAoD5B,CAAA,IAAA,eAjDYA,MAAAA,SAAAA,GACP,OAACa,MAAMvL,OAAO0K,IACdA,KAAW,KAAKrB,MAAcrJ,OAAO,KAAKgL,MAAM,KAAK3B,MAAMqB,OAC3D,KAAKG,aAAaH,GAAiB,EAEhC,KAJ6B1K,OAAO0K,KAgD5C,CAAA,IAAA,iBAzCcE,MAAAA,SAAAA,EAAIY,GACb,OAAEA,EAAQ9H,WAAW,MAAQ8H,EAAQ3N,SAAS,OAGlD2N,EAAUA,EAAQ1P,MAAM,EAAG0P,EAAQtX,OAAS,IAIhCuX,SAAS,MACnBC,EAAgB,SAChBC,EAAaH,EAAQvK,MAAM,MAClBuK,EAAQC,SAAS,OAC1BC,EAAgB,QAChBC,EAAaH,EAAQvK,MAAM,MAGH,IAAtB0K,EAAWzX,OAAqB,KAAK+W,eAEnB,WAAlBS,EACK,KAAKE,gBAAgBhB,EAAIe,EAAW,GAAIA,EAAW,IAEtC,UAAlBD,EACK,KAAKG,eAAejB,EAAIe,EAAW,GAAIA,EAAW,IAEpD,KAAKV,gBAtBH,KAAKA,eAIVS,IAAAA,EACAC,IAkCL,CAAA,IAAA,QAdKG,MAAAA,SAAAA,GAEA,GADCb,KAAAA,eAAiBa,EACH,iBAARA,EAAkB,MAAO,GAChC,IAACA,EAAIpI,WAAW,KAAM,OAAOoI,EAE7BN,IAAAA,EAAUM,EAAIhQ,MAAM,GACpB0P,OAAAA,EAAQ1P,MAAM,EAAG,GAAGG,gBAAiB,KAAKqN,WACrC,KAAKyC,eACVP,EAAQ1P,MAAM,EAAG,GAAGG,cACpBuP,EAAQ1P,MAAM,GAAGkQ,eAGZ,KAAK3C,MAAMmC,IAAYM,MAEjC,EAAA,GAAA,QAAA,OAAA;;AC1EI,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EAhDP,IAAA,EAAA,QAAA,WACA,EAAA,QAAA,sBACA,EAAA,QAAA,yBACA,EAAA,QAAA,mBACA,EAAA,QAAA,cACA,EAAA,QAAA,kBA2CO,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,eAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,YAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,MAAA,IAAA,OAAA,OAAA,OAAA,iBAAA,EAAA,CAAA,IAAA,CAAA,MAAA,OAAA,OAAA,OAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GAhCP,QAAA,eAEA,IAAMG,EAAU,6BAChB,SAASC,EAAMrS,GACFlB,OAAAA,EAAAA,MAAMkB,GAAGsS,QAEtB,SAASC,EAAYvS,GACZqS,OAAAA,EAAMrS,GAAG0J,IAAI8I,GAEtB,SAASC,EAAUzS,GAEVA,IADHzG,IAAAA,EAAS,GACNyG,EAAI,IAAI,CACT0S,IAAAA,EAAY1S,EAAI,GACpBzG,EAAOmB,KAAKgY,GACZ1S,EAAI4L,KAAK+G,MAAM3S,EAAI,IAAM,EAGpBzG,OADPA,EAAOmB,KAAKsF,GACLzG,EAAO8N,UAEhB,SAASmL,EAAmBxS,GAEnBoQ,OADGqC,EAAUzS,GACT0J,IAAI,SAACkJ,GAAQR,OAAAA,EAAQQ,KAAMrP,KAAK,IAE7C,SAASsP,EAAazC,EAAK1W,EAAOoZ,GAC5BlQ,IAAAA,EAAQwN,EAAI9U,QAAQ5B,GACpBkJ,OAAW,IAAXA,EAAqB,KACP,WAAdkQ,OACwBC,IAAnB3C,EAAIxN,EAAQ,GAAmB,KAAOwN,EAAIxN,EAAQ,GACzC,UAAdkQ,GAA8B1C,EAAIxN,EAAQ,IACvC,KAGF,IAAM4M,EAAQ,SAACpM,GAChB4P,IAAAA,EAAS5P,GAASA,EAAM4P,OAAU,CAAC,IAAK,KAE5C7V,OAAOmV,KAAKjG,EAAZ,YAAwBvS,QAAQ,SAACuD,GAEpBA,EAAAA,WAAAA,IAAO,EAAEgP,EAAAA,GAAAA,EAAWhP,WAAAA,MAE3BtD,IAOFkZ,EAPElZ,GAAO,EAAEsS,EAAAA,GAAAA,EAAF,YAEPkD,EAAO8C,EAAMW,EAAM,IACnB1D,EAAUiD,EAAYS,EAAM,IAC5BjO,EAAI,IAAIqK,EAAJ,OAAWrV,EAAMuV,EAASC,GAEhC2D,GAAU,EAAEH,EAAAA,QAAAA,GAWPI,SAAAA,EAAY9V,GACf6V,GAAAA,MAAc7V,EAAK,EAThB+V,SAAc/V,GACjBgW,IAAAA,GAAU,EAAOtZ,EAAAA,QAAAA,GAChBsZ,EAAQhW,KACXgW,EAAQhW,IAAO,EAAE,EAAA,GAAA,IACjBtD,EAAKsZ,IAMLD,CAAc/V,GACd6V,EAAQ7V,GACJuG,IAAAA,EAASqP,EAAMK,cAAc,UAAYjW,GACzCuG,IACFA,EAAO2P,QACP3P,EAAO4P,kBAAkB,EAAG,QAKzBC,SAAAA,EAAWpW,GACd6V,MAAc7V,GAAK6V,OAAQH,GAqC3BW,IAAAA,EAAW,SAAc,GAAXjW,IAAAA,EAAAA,EAAAA,EAAGT,EAAAA,EAAAA,EACjBK,EAAMI,EAAIT,EACV2W,GAAW,EAAE,EAAA,IAAA,GAUV,OARG,EAAA,EAAA,WAAA,WACJT,MAAc7V,IAAQ,EAAOsW,EAAAA,QAAAA,GAEtBT,MAAc7V,IAAO,EAAOsW,EAAAA,QAAAA,IACrCA,GAAS,GAFTA,GAAS,KAMN,WACLA,OAAAA,IACI/O,EACGgP,MAAAA,GAAG,SAAWnW,EAAIT,GAClB6W,QAAQ,WAAMV,OAAAA,EAAY1V,EAAIT,KAC9B8W,OAAOL,GACPM,UAAU,SAAC3T,GAAM4T,OAhDnBA,SAAc5T,EAAG6T,EAAQC,GAE5BC,IAAAA,EACA/T,GAAU,YAAVA,EAAE/C,IAAmB,CACnB+W,IAAAA,EAASvB,EAAatD,EAAM2E,EAAK,UACrCC,EAAsB,OAAXC,EAAkBH,EAASG,EAAS,KAE7ChU,GAAU,cAAVA,EAAE/C,KAAiC,UAAV+C,EAAE/C,IAAiB,CAC1C+W,IAAAA,EAASvB,EAAatD,EAAM2E,EAAK,SACrCC,EAAsB,OAAXC,EAAkBH,EAASG,EAAS,KAE7ChU,GAAU,cAAVA,EAAE/C,KAAuB+C,EAAEiU,OAAQ,CACjCC,IAAAA,EAAYzB,EAAavD,EAAS2E,EAAQ,UAC9CE,EAAyB,OAAdG,EAAqBA,EAAYJ,EAAM,KAEhD9T,GAAU,eAAVA,EAAE/C,KAAwB+C,EAAEiU,OAAQ,CAClCC,IAAAA,EAAYzB,EAAavD,EAAS2E,EAAQ,SAC9CE,EAAyB,OAAdG,EAAqBA,EAAYJ,EAAM,KAGhDC,IACF/T,EAAEwK,iBACFuI,EAAYgB,IA0BYH,CAAc5T,EAAG3C,EAAGT,KACrC+J,QAAQ,SAAC3G,GAAMmU,OArDjBA,SAAYnU,EAAG/C,IACftD,EAAAA,EAAAA,QAAAA,GAAMsD,GAAK+C,EAAEwD,OAAOlK,OAoDH6a,CAAYnU,EAAG3C,EAAIT,KAClCtD,MAAM,WACE+D,OAAAA,EAAIT,KAAKjD,IACZmZ,MAAczV,EAAIT,EAChBjD,IAAO0D,EAAIT,KACX+H,EAAEoM,MAAMpX,IAAO0D,EAAIT,MACrB,MAER,EAAI,EAAA,KAAA,WAAOK,OAAAA,KAAOtD,IAASgL,EAAEoM,MAAMpX,IAAOsD,MAAU,OAGtDqO,GAAO,EACX,EAAA,MAAA,CAAE7F,MAAO,SACTlB,EAAImB,IAAAA,MACF,IADFnB,EACE,EACE,EAAA,QAAA,EACE,EAAA,QAAA,EAAGS,EAAAA,IAAAA,EAAGU,GAAAA,MAAgB,KAAA,WACpBwJ,OAAAA,EAAQ5F,IAAI,SAACuK,GAAW7O,OAAAA,EAAGU,GAAAA,MAAkBmO,IAArB7O,CAAqB6O,SAGjD,EAAM,EAAA,OAAA,WACJ1E,OAAAA,EAAK7F,IAAI,SAAC1M,GACRmI,OAAAA,EAAGyO,GAAAA,GAAG,OAAS5W,EAAfmI,CACEC,EAAGU,GAAAA,MAAe9I,IAAlBoI,CAAkBpI,GAClBsS,EAAQ5F,IAAI,SAACjM,GACX2H,OAAAA,EAAGwO,GAAAA,GAAGnW,EAAIT,GAAGiJ,QAAQ,WAAMkN,OAAAA,EAAY1V,EAAIT,IAA3CoI,CACEsO,EAAS,CAAEjW,EAAGA,EAAGT,EAAGA,cAQlCsH,EAAO2B,OAAAA,QAzDAuO,WACPza,EAAK,KAwDLuK,CAAsB,UAKjBoH,OAFPuH,EAAQvH,EAAK4H,cAAc,SAEpB5H,GApIF,QAAA,MAAA;;ACrCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,EAXP,IAAA,EAAA,QAAA,cACA,QAAA,aAEA,IAAA,EAAA,QAAA,mBACA,EAAA,QAAA,gCACA,EAAA,QAAA,wBACA,EAAA,QAAA,iBACA,EAAA,QAAA,gBACA,EAAA,QAAA,wBACA,EAAA,QAAA,uBAEO,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,qBAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,IAAA,IAAA,EAAA,EAAA,CAAA,QAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,EAAA,GAAA,OAAA,IAAA,EAAA,EAAA,MAAA,IAAA,OAAA,OAAA,OAAA,iBAAA,EAAA,CAAA,IAAA,CAAA,MAAA,OAAA,OAAA,OAAA,IAAM+I,EAAM,WACVrQ,OAAAA,EAAK0B,KAAAA,MACVzB,IADKD,CACLC,EAAEqQ,EAAAA,KAAuB,IAAzBrQ,CAAyB,SACzB,EAFK,EAAA,YAGL,EAHK,EAAA,yBAIL,EAJK,EAAA,iBAKL,EALK,EAAA,UAML,EANK,EAAA,SAOL,EAPK,EAAA,iBAQL,EARK,EAAA,WADF,QAAA,IAAA;;ACTP,aAFA,IAAA,EAAA,QAAA,SAEA5E,SAAS6T,cAAc,SAAS3N,QAAO,EAAvC,EAAA","file":"src.285853c4.js","sourceRoot":"..","sourcesContent":["import { getChildrenDeep } from './utils.js';\n\nconst EMPTY_ARR = [];\nlet tracking;\nlet queue;\n\n/**\n * Returns true if there is an active observer.\n * @return {boolean}\n */\nexport function isListening() {\n  return !!tracking;\n}\n\n/**\n * Creates a root and executes the passed function that can contain computations.\n * The executed function receives an `unsubscribe` argument which can be called to\n * unsubscribe all inner computations.\n *\n * @param  {Function} fn\n * @return {*}\n */\nexport function root(fn) {\n  const prevTracking = tracking;\n  const rootUpdate = () => {};\n  tracking = rootUpdate;\n  resetUpdate(rootUpdate);\n  const result = fn(() => {\n    _unsubscribe(rootUpdate);\n    tracking = undefined;\n  });\n  tracking = prevTracking;\n  return result;\n}\n\n/**\n * Sample the current value of an observable but don't create a dependency on it.\n *\n * @example\n * computed(() => { if (foo()) bar(sample(bar) + 1); });\n *\n * @param  {Function} fn\n * @return {*}\n */\nexport function sample(fn) {\n  const prevTracking = tracking;\n  tracking = undefined;\n  const value = fn();\n  tracking = prevTracking;\n  return value;\n}\n\n/**\n * Creates a transaction in which an observable can be set multiple times\n * but only trigger a computation once.\n * @param  {Function} fn\n * @return {*}\n */\nexport function transaction(fn) {\n  let prevQueue = queue;\n  queue = [];\n  const result = fn();\n  let q = queue;\n  queue = prevQueue;\n  q.forEach(data => {\n    if (data._pending !== EMPTY_ARR) {\n      const pending = data._pending;\n      data._pending = EMPTY_ARR;\n      data(pending);\n    }\n  });\n  return result;\n}\n\n/**\n * Creates a new observable, returns a function which can be used to get\n * the observable's value by calling the function without any arguments\n * and set the value by passing one argument of any type.\n *\n * @param  {*} value - Initial value.\n * @return {Function}\n */\nfunction observable(value) {\n  function data(nextValue) {\n    if (arguments.length === 0) {\n      if (tracking && !data._observers.has(tracking)) {\n        data._observers.add(tracking);\n        tracking._observables.push(data);\n      }\n      return value;\n    }\n\n    if (queue) {\n      if (data._pending === EMPTY_ARR) {\n        queue.push(data);\n      }\n      data._pending = nextValue;\n      return nextValue;\n    }\n\n    value = nextValue;\n\n    // Clear `tracking` otherwise a computed triggered by a set\n    // in another computed is seen as a child of that other computed.\n    const clearedUpdate = tracking;\n    tracking = undefined;\n\n    // Update can alter data._observers, make a copy before running.\n    data._runObservers = new Set(data._observers);\n    data._runObservers.forEach(observer => (observer._fresh = false));\n    data._runObservers.forEach(observer => {\n      if (!observer._fresh) observer();\n    });\n\n    tracking = clearedUpdate;\n    return value;\n  }\n\n  // Tiny indicator that this is an observable function.\n  data.$o = true;\n  data._observers = new Set();\n  // The 'not set' value must be unique, so `nullish` can be set in a transaction.\n  data._pending = EMPTY_ARR;\n\n  return data;\n}\n\n/**\n * @namespace\n * @borrows observable as o\n */\nexport { observable, observable as o };\n\n/**\n * Creates a new computation which runs when defined and automatically re-runs\n * when any of the used observable's values are set.\n *\n * @param {Function} observer\n * @param {*} value - Seed value.\n * @return {Function} Computation which can be used in other computations.\n */\nfunction computed(observer, value) {\n  observer._update = update;\n\n  // if (tracking == null) {\n  //   console.warn(\"computations created without a root or parent will never be disposed\");\n  // }\n\n  resetUpdate(update);\n  update();\n\n  function update() {\n    const prevTracking = tracking;\n    if (tracking) {\n      tracking._children.push(update);\n    }\n\n    const prevChildren = update._children;\n\n    _unsubscribe(update);\n    update._fresh = true;\n    tracking = update;\n    value = observer(value);\n\n    // If any children computations were removed mark them as fresh.\n    // Check the diff of the children list between pre and post update.\n    prevChildren.forEach(u => {\n      if (update._children.indexOf(u) === -1) {\n        u._fresh = true;\n      }\n    });\n\n    // If any children were marked as fresh remove them from the run lists.\n    const allChildren = getChildrenDeep(update._children);\n    allChildren.forEach(removeFreshChildren);\n\n    tracking = prevTracking;\n    return value;\n  }\n\n  // Tiny indicator that this is an observable function.\n  data.$o = true;\n\n  function data() {\n    if (update._fresh) {\n      update._observables.forEach(o => o());\n    } else {\n      value = update();\n    }\n    return value;\n  }\n\n  return data;\n}\n\nfunction removeFreshChildren(u) {\n  if (u._fresh) {\n    u._observables.forEach(o => {\n      if (o._runObservers) {\n        o._runObservers.delete(u);\n      }\n    });\n  }\n}\n\n/**\n * @namespace\n * @borrows computed as S\n */\nexport { computed, computed as S };\n\n/**\n * Run the given function just before the enclosing computation updates\n * or is disposed.\n * @param  {Function} fn\n * @return {Function}\n */\nexport function cleanup(fn) {\n  if (tracking) {\n    tracking._cleanups.push(fn);\n  }\n  return fn;\n}\n\n/**\n * Subscribe to updates of an observable.\n * @param  {Function} observer\n * @return {Function}\n */\nexport function subscribe(observer) {\n  computed(observer);\n  return () => _unsubscribe(observer._update);\n}\n\n/**\n * Statically declare a computation's dependencies.\n *\n * @param  {Function|Array}   obs\n * @param  {Function} fn - Callback function.\n * @param  {*} [seed] - Seed value.\n * @param  {boolean} [onchanges] - If true the initial run is skipped.\n * @return {Function} Computation which can be used in other computations.\n */\nexport function on(obs, fn, seed, onchanges) {\n  obs = [].concat(obs);\n  return computed((value) => {\n    obs.forEach((o) => o());\n\n    let result = value;\n    if (!onchanges) {\n      result = sample(() => fn(value));\n    }\n\n    onchanges = false;\n    return result;\n  }, seed);\n}\n\n/**\n * Unsubscribe from an observer.\n * @param  {Function} observer\n */\nexport function unsubscribe(observer) {\n  _unsubscribe(observer._update);\n}\n\nfunction _unsubscribe(update) {\n  update._children.forEach(_unsubscribe);\n  update._observables.forEach(o => {\n    o._observers.delete(update);\n    if (o._runObservers) {\n      o._runObservers.delete(update);\n    }\n  });\n  update._cleanups.forEach(c => c());\n  resetUpdate(update);\n}\n\nfunction resetUpdate(update) {\n  // Keep track of which observables trigger updates. Needed for unsubscribe.\n  update._observables = [];\n  update._children = [];\n  update._cleanups = [];\n}\n","export function getChildrenDeep(children) {\n  return children.reduce(\n    (res, curr) => res.concat(curr, getChildrenDeep(curr._children)),\n    []\n  );\n}\n","/**\n * Copyright 2018 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MINI } from './constants.js';\nimport { build, evaluate } from './build.js';\n\nconst CACHES = new Map();\n\nconst regular = function(statics) {\n  let tmp = CACHES.get(this);\n  if (!tmp) {\n    tmp = new Map();\n    CACHES.set(this, tmp);\n  }\n  tmp = evaluate(this, tmp.get(statics) || (tmp.set(statics, tmp = build(statics)), tmp), arguments, []);\n  return tmp.length > 1 ? tmp : tmp[0];\n};\n\nconst custom = function() {\n  const result = (MINI ? build : regular).apply(this, arguments);\n  if (result) {\n    return Array.isArray(result)\n      ? this(result)\n      : typeof result === 'object'\n      ? result\n      : this([result]);\n  }\n};\n\nconst wrapper = function() {\n  const h = custom.bind(this);\n  return (this.wrap || h).apply(h, arguments);\n};\n\nexport default wrapper;\n","import { MINI } from './constants.js';\n\nconst MODE_SLASH = 0;\nconst MODE_TEXT = 1;\nconst MODE_WHITESPACE = 2;\nconst MODE_TAGNAME = 3;\nconst MODE_COMMENT = 4;\nconst MODE_PROP_SET = 5;\nconst MODE_PROP_APPEND = 6;\n\nconst TAG_SET = 1;\nconst CHILD_APPEND = 0;\nconst CHILD_RECURSE = 2;\nconst PROPS_ASSIGN = 3;\nconst PROP_SET = MODE_PROP_SET;\nconst PROP_APPEND = MODE_PROP_APPEND;\n\n// Turn a result of a build(...) call into a tree that is more\n// convenient to analyze and transform (e.g. Babel plugins).\n// For example:\n//  treeify(\n//    build'<div href=\"1${a}\" ...${b}><${x} /></div>`,\n//    [X, Y, Z]\n//  )\n// returns:\n//  {\n//    tag: 'div',\n//    props: [ { href: [\"1\", X] },  Y ],\n//    children: [ { tag: Z, props: [], children: [] } ]\n//  }\nexport const treeify = (built, fields) => {\n  const _treeify = built => {\n    let tag = '';\n    let currentProps = null;\n    const props = [];\n    const children = [];\n\n    for (let i = 1; i < built.length; i++) {\n      const field = built[i++];\n      const value = typeof field === 'number' ? fields[field - 1] : field;\n\n      if (built[i] === TAG_SET) {\n        tag = value;\n      }\n      else if (built[i] === PROPS_ASSIGN) {\n        props.push(value);\n        currentProps = null;\n      }\n      else if (built[i] === PROP_SET) {\n        if (!currentProps) {\n          currentProps = Object.create(null);\n          props.push(currentProps);\n        }\n        currentProps[built[++i]] = [value];\n      }\n      else if (built[i] === PROP_APPEND) {\n        currentProps[built[++i]].push(value);\n      }\n      else if (built[i] === CHILD_RECURSE) {\n        children.push(_treeify(value));\n      }\n      else if (built[i] === CHILD_APPEND) {\n        children.push(value);\n      }\n    }\n\n    return { tag, props, children };\n  };\n  const { children } = _treeify(built);\n  return children.length > 1 ? children : children[0];\n};\n\n\nexport const evaluate = (h, built, fields, args) => {\n  let propBody = {};\n  for (let i = 1; i < built.length; i++) {\n    const field = built[i];\n    const value = typeof field === 'number' ? fields[field] : field;\n    const type = built[++i];\n\n    if (type === TAG_SET) {\n      args[0] = value;\n    }\n    else if (type === PROPS_ASSIGN) {\n      args[1] = Object.assign(args[1] || {}, value);\n    }\n    else if (type === PROP_SET) {\n      (args[1] = args[1] || {})[built[++i]] = value;\n    }\n    else if (type === PROP_APPEND) {\n      let key = built[++i];\n      let prev = (args[1] = args[1] || {})[key];\n      let parts = propBody[key];\n\n      if (!parts && (typeof value === 'function' || typeof prev === 'function')) {\n        parts = (prev && [prev]) || [];\n\n        args[1][key] = function() {\n          let prop = '';\n          for (var j = 0; j < parts.length; j++) {\n            prop += typeof parts[j] === 'function' ? parts[j].call(this) : parts[j];\n          }\n          return prop;\n        };\n      }\n\n      if (parts) {\n        parts.push(value);\n      } else {\n        args[1][key] += (value + '');\n      }\n    }\n    else if (type) {\n      // code === CHILD_RECURSE\n      const result = () => h.apply(null, evaluate(h, value, fields, ['', null]));\n\n      // if it's a component we pass the children with closure so the\n      // component is executed before the children of that component.\n      args.push(typeof args[0] === 'function' ? result : result());\n    }\n    else {\n      // code === CHILD_APPEND\n      args.push(value);\n    }\n  }\n\n  return args;\n};\n\nexport const build = function(statics) {\n  const fields = arguments;\n  const h = this;\n\n  let mode = MODE_TEXT;\n  let buffer = '';\n  let quote = '';\n  let current = [0];\n  let char, propName;\n\n  const commit = field => {\n    if (mode === MODE_TEXT && (field || (buffer = buffer.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,'')))) {\n      if (MINI) {\n        current.push(field ? fields[field] : buffer);\n      }\n      else {\n        current.push(field || buffer, CHILD_APPEND);\n      }\n    }\n    else if (mode === MODE_TAGNAME && (field || buffer)) {\n      if (MINI) {\n        current[1] = field ? fields[field] : buffer;\n      }\n      else {\n        current.push(field || buffer, TAG_SET);\n      }\n      mode = MODE_WHITESPACE;\n    }\n    else if (mode === MODE_WHITESPACE && buffer === '...' && field) {\n      if (MINI) {\n        current[2] = Object.assign(current[2] || {}, fields[field]);\n      }\n      else {\n        current.push(field, PROPS_ASSIGN);\n      }\n    }\n    else if (mode === MODE_WHITESPACE && buffer && !field) {\n      if (MINI) {\n        (current[2] = current[2] || {})[buffer] = true;\n      }\n      else {\n        current.push(true, PROP_SET, buffer);\n      }\n    }\n    else if (mode >= MODE_PROP_SET) {\n      if (MINI) {\n        if (mode === MODE_PROP_SET) {\n          (current[2] = current[2] || {})[propName] = field ? buffer ? (buffer + fields[field]) : fields[field] : buffer;\n          mode = MODE_PROP_APPEND;\n        }\n        else if (field || buffer) {\n          current[2][propName] += field ? buffer + fields[field] : buffer;\n        }\n      }\n      else {\n        if (buffer || (!field && mode === MODE_PROP_SET)) {\n          current.push(buffer, mode, propName);\n          mode = MODE_PROP_APPEND;\n        }\n        if (field) {\n          current.push(field, mode, propName);\n          mode = MODE_PROP_APPEND;\n        }\n      }\n    }\n\n    buffer = '';\n  };\n\n  for (let i=0; i<statics.length; i++) {\n    if (i) {\n      if (mode === MODE_TEXT) {\n        commit();\n      }\n      commit(i);\n    }\n\n    for (let j=0; j<statics[i].length;j++) {\n      char = statics[i][j];\n\n      if (mode === MODE_TEXT) {\n        if (char === '<') {\n          // commit buffer\n          commit();\n          if (MINI) {\n            current = [current, '', null];\n          }\n          else {\n            current = [current];\n          }\n          mode = MODE_TAGNAME;\n        }\n        else {\n          buffer += char;\n        }\n      }\n      else if (mode === MODE_COMMENT) {\n        // Ignore everything until the last three characters are '-', '-' and '>'\n        if (buffer === '--' && char === '>') {\n          mode = MODE_TEXT;\n          buffer = '';\n        }\n        else {\n          buffer = char + buffer[0];\n        }\n      }\n      else if (quote) {\n        if (char === quote) {\n          quote = '';\n        }\n        else {\n          buffer += char;\n        }\n      }\n      else if (char === '\"' || char === \"'\") {\n        quote = char;\n      }\n      else if (char === '>') {\n        commit();\n        mode = MODE_TEXT;\n      }\n      else if (!mode) {\n        // Ignore everything until the tag ends\n      }\n      else if (char === '=') {\n        mode = MODE_PROP_SET;\n        propName = buffer;\n        buffer = '';\n      }\n      else if (char === '/' && (mode < MODE_PROP_SET || statics[i][j+1] === '>')) {\n        commit();\n        if (mode === MODE_TAGNAME) {\n          current = current[0];\n        }\n        mode = current;\n        if (MINI) {\n          (current = current[0]).push(h.apply(null, mode.slice(1)));\n        }\n        else {\n          (current = current[0]).push(mode, CHILD_RECURSE);\n        }\n        mode = MODE_SLASH;\n      }\n      else if (char === ' ' || char === '\\t' || char === '\\n' || char === '\\r') {\n        // <a disabled>\n        commit();\n        mode = MODE_WHITESPACE;\n      }\n      else {\n        buffer += char;\n      }\n\n      if (mode === MODE_TAGNAME && buffer === '!--') {\n        mode = MODE_COMMENT;\n        current = current[0];\n      }\n    }\n  }\n  commit();\n\n  if (MINI) {\n    return current.length > 2 ? current.slice(1) : current[1];\n  }\n  return current;\n};\n","/* Adapted from DOM Expressions - The MIT License - Ryan Carniato */\nimport { add } from './add.js';\nimport { insert } from './insert.js';\nimport { property } from './property.js';\nimport { api } from './api.js';\nimport { removeNodes } from './remove-nodes.js';\n\napi.insert = insert;\napi.property = property;\napi.add = add;\napi.rm = removeNodes;\n\nexport { context } from './h.js';\nexport { api };\n","/*\n * @param {object} api\n * @param {Function} [api.subscribe] - Function that listens to state changes.\n * @param {Function} [api.cleanup] - Add the given function to the cleanup stack.\n */\nexport const api = {};\n","export const EMPTY_ARR = [];\nexport const GROUPING = '__g';\n","import { castNode } from './cast-node.js';\nimport { frag } from './frag.js';\n\n/**\n * Add a string or node before a reference node or at the end.\n *\n * @param {Node} parent\n * @param {Node|string} value\n * @param {Node} [endMark]\n * @return {Node}\n */\nexport function add(parent, value, endMark) {\n  value = castNode(value);\n\n  const fragOrNode = frag(value) || value;\n\n  // If endMark is `null`, value will be added to the end of the list.\n  parent.insertBefore(value, endMark && endMark.parentNode && endMark);\n\n  return fragOrNode;\n}\n","import { add } from './add.js';\n\nexport function frag(value) {\n  const { childNodes } = value;\n  if (!childNodes || value.nodeType !== 11) return;\n\n  if (childNodes.length < 2) {\n    return childNodes[0];\n  }\n\n  // For a fragment of 2 elements or more add a startMark. This is required\n  // for multiple nested conditional computeds that return fragments.\n  const _startMark = add(value, '', childNodes[0]);\n\n  return {\n    _startMark\n  };\n}\n","import { api } from './api.js';\nimport { EMPTY_ARR } from './constants.js';\n\nexport function castNode(value) {\n  if (typeof value === 'string') {\n    return document.createTextNode(value);\n  }\n  if (!(value instanceof Node)) {\n    // Passing an empty array creates a DocumentFragment.\n    return api.h(EMPTY_ARR, value);\n  }\n  return value;\n}\n","/**\n * Removes nodes, starting from `startNode` (inclusive) to `endMark` (exclusive).\n *\n * @param  {Node} parent\n * @param  {Node} startNode - This is the start node.\n * @param  {Node} endMark - This is the ending marker node.\n */\nexport function removeNodes(parent, startNode, endMark) {\n  while (startNode && startNode !== endMark) {\n    const n = startNode.nextSibling;\n    // Is needed in case the child was pulled out the parent before clearing.\n    if (parent === startNode.parentNode) {\n      parent.removeChild(startNode);\n    }\n    startNode = n;\n  }\n}\n","import { api } from './api.js';\n\nexport function property(el, value, name, isAttr, isCss) {\n  if (value == null) return;\n  if (!name || (name === 'attrs' && (isAttr = true))) {\n    for (name in value) {\n      api.property(el, value[name], name, isAttr, isCss);\n    }\n  } else if (name[0] === 'o' && name[1] === 'n' && !value.$o) {\n    // Functions added as event handlers are not executed\n    // on render unless they have an observable indicator.\n    handleEvent(el, name, value);\n  } else if (typeof value === 'function') {\n    api.subscribe(function setProperty() {\n      api.property(el, value.call({ el, name }), name, isAttr, isCss);\n    });\n  } else if (isCss) {\n    el.style.setProperty(name, value);\n  } else if (\n    isAttr ||\n    name.slice(0, 5) === 'data-' ||\n    name.slice(0, 5) === 'aria-'\n  ) {\n    el.setAttribute(name, value);\n  } else if (name === 'style') {\n    if (typeof value === 'string') {\n      el.style.cssText = value;\n    } else {\n      api.property(el, value, null, isAttr, true);\n    }\n  } else {\n    if (name === 'class') name += 'Name';\n    el[name] = value;\n  }\n}\n\nfunction handleEvent(el, name, value) {\n  name = name.slice(2).toLowerCase();\n\n  if (value) {\n    el.addEventListener(name, eventProxy);\n  } else {\n    el.removeEventListener(name, eventProxy);\n  }\n\n  (el._listeners || (el._listeners = {}))[name] = value;\n}\n\n/**\n * Proxy an event to hooked event handlers.\n * @param {Event} e - The event object from the browser.\n * @return {Function}\n */\nfunction eventProxy(e) {\n  // eslint-disable-next-line\n  return this._listeners[e.type](e);\n}\n","/* Adapted from Hyper DOM Expressions - The MIT License - Ryan Carniato */\nimport { api } from './api.js';\nimport { add } from './add.js';\n\n/**\n * Create a sinuous `h` tag aka hyperscript.\n * @param {object} options\n * @param  {boolean} isSvg\n * @return {Function} `h` tag.\n */\nexport function context(options, isSvg) {\n  for (let i in options) api[i] = options[i];\n\n  function h() {\n    const args = Array.from(arguments);\n    let el;\n\n    function item(arg) {\n      if (arg == null);\n      else if (typeof arg === 'string') {\n        if (el) {\n          add(el, arg);\n        } else {\n          if (isSvg) {\n            el = document.createElementNS('http://www.w3.org/2000/svg', arg);\n          } else {\n            el = document.createElement(arg);\n          }\n        }\n      } else if (Array.isArray(arg)) {\n        // Support Fragments\n        if (!el) el = document.createDocumentFragment();\n        arg.forEach(item);\n      } else if (arg instanceof Node) {\n        if (el) {\n          add(el, arg);\n        } else {\n          // Support updates\n          el = arg;\n        }\n      } else if (typeof arg === 'object') {\n        api.property(el, arg, null, isSvg);\n      } else if (typeof arg === 'function') {\n        if (el) {\n          const endMark = add(el, '');\n          api.insert(el, arg, endMark);\n        } else {\n          // Support Components\n          el = arg.apply(null, args.splice(1));\n        }\n      } else {\n        add(el, '' + arg);\n      }\n    }\n\n    args.forEach(item);\n    return el;\n  }\n\n  return h;\n}\n","import {app} from './app'\n\ndocument.querySelector('#root').append(app())","import { api } from './api.js';\nimport { add } from './add.js';\nimport { removeNodes } from './remove-nodes.js';\n\nexport function insert(el, value, endMark, current, startNode) {\n  // This is needed if the el is a DocumentFragment initially.\n  el = (endMark && endMark.parentNode) || el;\n\n  // Save startNode of current. In clear() endMark.previousSibling\n  // is not always accurate if content gets pulled before clearing.\n  startNode = startNode || current instanceof Node && current;\n\n  if (value === current);\n  else if (\n    (!current || typeof current === 'string') &&\n    (typeof value === 'string' || (typeof value === 'number' && (value += '')))\n  ) {\n    // Block optimized for string insertion.\n    if (current == null || !el.firstChild) {\n      if (endMark) {\n        add(el, value, endMark);\n      } else {\n        // textContent is a lot faster than append -> createTextNode.\n        el.textContent = value;\n      }\n    } else {\n      if (endMark) {\n        (endMark.previousSibling || el.lastChild).data = value;\n      } else {\n        el.firstChild.data = value;\n      }\n    }\n    current = value;\n  } else if (typeof value === 'function') {\n    api.subscribe(function insertContent() {\n      current = api.insert(el, value.call({ el, endMark }), endMark, current, startNode);\n    });\n  } else {\n    // Block for nodes, fragments, Arrays, non-stringables and node -> stringable.\n    if (endMark) {\n      // `current` can't be `0`, it's coerced to a string in insert.\n      if (current) {\n        if (!startNode) {\n          // Support fragments\n          startNode = (current._startMark && current._startMark.nextSibling)\n            || endMark.previousSibling;\n        }\n        removeNodes(el, startNode, endMark);\n      }\n    } else {\n      el.textContent = '';\n    }\n    current = null;\n\n    if (value && value !== true) {\n      current = add(el, value, endMark);\n    }\n  }\n\n  return current;\n}\n","function templateValues(args) {\r\n  const [strings, ...templateArgs] = args;\r\n  const result = [];\r\n  for (const [index, s] of strings.entries()) {\r\n    if (s !== \"\") {\r\n      result.push(s);\r\n    }\r\n    let arg = templateArgs[index];\r\n    if (typeof arg !== \"undefined\") {\r\n      result.push(arg);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nlet interpunct = new RegExp(\"\",\"g\");\r\n\r\nfunction createInitialBuilder(constructor, type) {\r\n  function setPropertyValue(...args) {\r\n    let [value] = args;\r\n    let { props, prop } = this.__element_info__;\r\n    if (typeof value === \"undefined\") {\r\n      props = { ...props };\r\n      delete props[prop];\r\n      return createBuilder({ props, prop: null });\r\n    }\r\n    else if (Array.isArray(value) && Object.isFrozen(value)) {\r\n      value = templateValues(args).join(\"\");\r\n    }\r\n    else if (args.length > 1) {\r\n      value = args;\r\n    }\r\n    props = { ...props, [prop]: value };\r\n    return createBuilder({ props, prop: null });\r\n  }\r\n  function setPropsValues(props) {\r\n    let { props: existingProps } = this.__element_info__;\r\n    props = { ...existingProps, ...props };\r\n    return createBuilder({ props, prop: null });\r\n  }\r\n  function createBuilder(propsInfo) {\r\n    let builder = new Proxy(() => { }, {\r\n      apply(target, thisArg, children) {\r\n        let { props } = builder.__element_info__;\r\n        if (typeof props.exec === \"function\") {\r\n          let exec = props.exec;\r\n          delete props.exec;\r\n          let result = exec(builder, children);\r\n          props.exec = exec;\r\n          return result;\r\n        }\r\n        let [first] = children;\r\n        if (Array.isArray(first) && Object.isFrozen(first)) {\r\n          children = templateValues(children);\r\n        }\r\n        if (Array.isArray(props.children)) {\r\n          props.children.push(...children)\r\n          children = props.children;\r\n          delete props.children;\r\n        }\r\n        for (let i = 0; i < children.length; i++) {\r\n          let arg = children[i];\r\n          if (typeof arg === \"function\" && arg.__element_info__) {\r\n            children[i] = arg();\r\n          }\r\n        }\r\n        return constructor(type, props, ...children);\r\n      },\r\n      get(target, prop) {\r\n        const result = target[prop];\r\n        if (typeof result !== \"undefined\") {\r\n          return result;\r\n        }\r\n        if (prop === \"props\") {\r\n          return setPropsValues;\r\n        }\r\n        else if (typeof prop === \"string\") {\r\n          if(prop.indexOf(\"\") !== -1) {\r\n            prop = prop.replace(interpunct, \"-\");\r\n          }\r\n          if (prop.endsWith(\"Value\") && prop.length > 5) {\r\n            return target.__element_info__.props[prop.slice(0, -5)];\r\n          }\r\n          target.__element_info__.prop = prop;\r\n          return setPropertyValue;\r\n        }\r\n      }\r\n    })\r\n    builder.__element_info__ = propsInfo;\r\n    return builder;\r\n  }\r\n  return createBuilder({ props: {}, prop: null });\r\n}\r\n\r\n\r\nfunction builders(constructor, types = []) {\r\n  if (typeof constructor !== \"function\") {\r\n    throw Error(\"elementConstructor argument must be present and it must be a function.\");\r\n  }\r\n  if (types.length > 0) {\r\n    let builders = [];\r\n    for (const element of types) {\r\n      builders.push(createInitialBuilder(constructor, element));\r\n    }\r\n    return builders;\r\n  }\r\n  else {\r\n    return new Proxy(() => { }, {\r\n      get(target, prop) {\r\n        const result = target[prop];\r\n        if (typeof result !== \"undefined\") {\r\n          return result;\r\n        }\r\n        target[prop] = createInitialBuilder(constructor, prop);\r\n        return target[prop];\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default builders;\r\n","import { api } from \"sinuous\";\nimport builders from \"webscript\";\n\nexport const {\n  main,\n  a,\n  button,\n  progress,\n  span,\n  section,\n  h2,\n  div,\n  input,\n  select,\n  option,\n  p,\n  table,\n  thead,\n  tbody,\n  tr,\n  td,\n} = builders(api.h);\nexport const { svg, circle } = builders(api.hs);\n\nexport const frag = (...elements) => {\n  let fragment = new DocumentFragment();\n  elements.forEach((element) => {\n    fragment.append(element);\n  });\n  return fragment;\n};\n","import { section, h2 } from \"../elements\";\n\nimport \"./card.css\";\n\nexport const card = ({ title }, ...children) => {\n  return section.class(\"card \" + title.replace(\" \", \"-\"))(h2(title), children);\n};\n","import { o } from \"sinuous\";\nimport { button } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./counter.css\";\n\nexport const counter = () => {\n  let count = o(0);\n\n  return card(\n    { title: \"Counter\" },\n    count,\n    button.onclick(() => count(count() + 1))(\"+\")\n  );\n};\n","import { o } from \"sinuous\";\nimport { span, input } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./temperatureConverter.css\";\n\nfunction trunc(n) {\n  return Number(n.toFixed(2));\n}\n\nfunction remove0(n) {\n  if (/^0\\d+$/.test(n)) return n.slice(1);\n  if (/^-0\\d+$/.test(n)) return \"-\" + n.slice(2);\n  return n;\n}\n\nfunction getC(f) {\n  return trunc((5 / 9) * (f - 32)) || -17.78; // 0 F\n}\nfunction getF(c) {\n  return trunc((9 / 5) * c + 32) || 32; // 0 C\n}\nlet r = /^-?\\d*.?\\d*$/;\nfunction isValid(temp) {\n  if (/^-?\\d*$/.test(temp)) return true;\n  if (/^-?\\d+[.]?\\d*$/.test(temp)) return true;\n  return false;\n}\n\nexport const temperatureConverter = () => {\n  let c = o(0);\n  let f = o(32);\n\n  const updateFromC = (e) => update(e, c, f, getF);\n  const updateFromF = (e) => update(e, f, c, getC);\n\n  const update = (e, from, to, get) => {\n    let value = e.target.value; //|| \"0\";\n    if (!isValid(value)) return;\n    value = remove0(value);\n    from(value);\n    to(get(value));\n  };\n\n  return card(\n    { title: \"Temperature Converter\" },\n    span(input.value(c).oninput(updateFromC), \"Celsius\"),\n    \"=\",\n    span(input.value(f).oninput(updateFromF), \"Fahrenheit\")\n  );\n};\n","import { o } from \"sinuous\";\nimport { S } from \"sinuous/observable\";\nimport { div, select, option, input, button } from \"../elements\";\nimport { card } from \"../components/card\";\nimport \"./flightBooker.css\";\n\nlet flightMap = {\n  1: \"one-way flight\",\n  2: \"return flight\",\n};\n\nfunction tryAsDate(dateString) {\n  let dateArr = dateString.split(\".\").reverse();\n  if (dateArr[1].length !== 2 || dateArr[2].length !== 2) {\n    return false;\n  }\n  let date = new Date(dateArr.join(\"-\"));\n  return date.valueOf() || false;\n}\n\nfunction formatAsString(date) {\n  return date.toISOString().slice(0, 10).split(\"-\").reverse().join(\".\");\n}\n\nexport const flightBooker = () => {\n  let flightType = o(1);\n  let startDate = o(formatAsString(new Date()));\n  let returnDate = o(formatAsString(new Date()));\n\n  let error1 = S(() => !tryAsDate(startDate()));\n  let error2 = S(() => !tryAsDate(returnDate()));\n  let error3 = S(() => tryAsDate(returnDate()) < tryAsDate(startDate()));\n\n  let isBookButtonDisabled = S(() => error1() || error2() || error3());\n  let isOneWay = S(() => flightType() === 1);\n  let startDateClass = S(() => (error1() ? \"error\" : \"\"));\n  let returnDateClass = S(() => (error2() ? \"error\" : \"\"));\n\n  function book() {\n    let timeStrings = {\n      1: \" for \" + startDate(),\n      2: \" from \" + startDate() + \" to \" + returnDate(),\n    };\n    alert(\n      \"You have booked a \" + flightMap[flightType()] + timeStrings[flightType()]\n    );\n  }\n\n  return card(\n    { title: \"Flight Booker\" },\n    div(\n      select.value(flightType).onchange((e) => flightType(e.target.value))(\n        option.value`1`(flightMap[1]),\n        option.value`2`(flightMap[2])\n      ),\n      input\n        .value(startDate)\n        .class(startDateClass)\n        .oninput((e) => startDate(e.target.value)),\n      input\n        .value(returnDate)\n        .class(returnDateClass)\n        .oninput((e) => returnDate(e.target.value))\n        .disabled(isOneWay),\n      button.onclick(book).disabled(isBookButtonDisabled)(\"Book\")\n    )\n  );\n};\n","import { o } from \"sinuous\";\nimport { S } from \"sinuous/observable\";\nimport { card } from \"../components/card\";\nimport { div, progress, input, button } from \"../elements\";\n\nimport \"./timer.css\";\n\nexport const timer = () => {\n  const MAX = 30000;\n\n  let duration = o(5000);\n  let durationFormatted = S(() => (duration() / 1000).toFixed(1));\n  let start = o();\n  let time = o();\n  let p = S(() => (time() - start()) / duration());\n  let interval;\n\n  function createInterval() {\n    return setInterval(() => {\n      time(new Date().valueOf());\n    }, 10);\n  }\n  function startTimer() {\n    clearInterval(interval);\n    start(new Date().valueOf());\n    time(start());\n    interval = createInterval();\n  }\n\n  startTimer();\n\n  return card(\n    { title: \"Timer\" },\n    div.class`wrapper`(\n      \"Elapsed Time:\",\n      progress.value(p),\n      div.class`duration`(durationFormatted),\n      \"Duration:\",\n      input.type`range`\n        .min(0)\n        .max(MAX)\n        .value(duration)\n        .oninput((e) => duration(e.target.value)),\n      button.onclick(startTimer)(\"Reset Timer\")\n    )\n  );\n};\n","import { o } from \"sinuous\";\nimport { S, subscribe } from \"sinuous/observable\";\nimport { div, input, select, option, button } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./crud.css\";\n\nexport const crud = () => {\n  let prefix = o(\"\");\n  let entries = o([\n    o([\"Paul\", \"Atreides\"]),\n    o([\"Gurney\", \"Halleck\"]),\n    o([\"Duncan\", \"Idaho\"]),\n  ]);\n  let filteredEntries = S(() =>\n    // get filtered entries in which entry[1] startsWith prefix\n    // get array of [entry[0], entry[1], index]\n    entries()\n      .map((entry, i) => [entry()[0], entry()[1], i])\n      .filter((entry) =>\n        entry[1].toLowerCase().startsWith(prefix().toLowerCase())\n      )\n  );\n  let name = o(\"\");\n  let surname = o(\"\");\n  let selected = o(-1);\n  subscribe(() => {\n    prefix();\n    selected(-1);\n  });\n\n  function createHandler() {\n    entries(entries().concat(o([name(), surname()])));\n  }\n  function updateHandler() {\n    // if selected > -1 then update entries[selected]\n    selected() > -1 && entries()[selected()]([name(), surname()]);\n  }\n  function deleteHandler() {\n    // if selected > -1 then delete entries[selected]\n    selected() > -1 && entries(entries().filter((entry, i) => i != selected()));\n  }\n\n  return card(\n    { title: \"CRUD\" },\n    div.class`wrapper`(\n      \"Filter prefix:\",\n      input.value(prefix).oninput((e) => prefix(e.target.value)),\n      select.value(selected).oninput((e) => selected(e.target.value))\n        .size`4`(() =>\n        filteredEntries().map((entry) =>\n          option.value(entry[2])(entry[1] + \", \" + entry[0])\n        )\n      ),\n      div(\n        \"Name:\",\n        input.value(name).oninput((e) => name(e.target.value)),\n        \"Surname:\",\n        input.value(surname).oninput((e) => surname(e.target.value))\n      ),\n      div.class`buttons`(\n        button.onclick(createHandler)(\"Create\"),\n        button.onclick(updateHandler)(\"Update\"),\n        button.onclick(deleteHandler)(\"Delete\")\n      )\n    )\n  );\n};\n","import { o } from \"sinuous\";\nimport { subscribe, sample } from \"sinuous/observable\";\nimport { frag, div, input, svg, circle, button, p } from \"../elements\";\nimport { card } from \"../components/card\";\n\nimport \"./circleDrawer.css\";\n\nexport const circleDrawer = () => {\n  const BASE_RADIUS = 30;\n\n  let step = o(0);\n  let snapshots = o([o([])]);\n  let radius = o(BASE_RADIUS);\n  let resizing = o(false);\n  let present = o([]);\n  subscribe(() => present(snapshots()[step()]()));\n  subscribe(() => {\n    if (resizing()) {\n      let resizingIndex = sample(present).findIndex(\n        (c) => c.x === resizing().x && c.y === resizing().y\n      );\n      let newPresent = sample(present).slice();\n      newPresent[resizingIndex] = {\n        ...sample(present)[resizingIndex],\n        r: Number(radius()),\n      };\n      present(newPresent);\n    }\n  });\n\n  function handleRightClick(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    let c = e.target;\n    resizing({\n      x: c.cx.baseVal.value,\n      y: c.cy.baseVal.value,\n      r: c.r.baseVal.value,\n    });\n    radius(resizing().r);\n  }\n\n  function addCircle(e) {\n    let x = e.layerX;\n    let y = e.layerY;\n    let newSnapshot = present().slice();\n    newSnapshot.push({ x, y, r: BASE_RADIUS });\n    addSnapshot(o(newSnapshot));\n  }\n\n  function addSnapshot(newSnapshot) {\n    let newSnapshots = snapshots().slice(0, step() + 1);\n    newSnapshots.push(newSnapshot);\n    snapshots(newSnapshots);\n    step(step() + 1);\n  }\n\n  function undo() {\n    step(Math.max(step() - 1, 0));\n  }\n\n  function redo() {\n    step(Math.min(step() + 1, snapshots().length - 1));\n  }\n\n  function endResize() {\n    if (radius() !== resizing().r) {\n      resizing(false);\n      radius(BASE_RADIUS);\n      addSnapshot(o(present().slice()));\n    }\n    resizing(false);\n  }\n\n  const overlay = () =>\n    frag(\n      div.class`overlay`.onclick(endResize)(),\n      div.class`resizer`(\n        p`Adjust radius of circle at (${() => resizing().x},\n        ${() => resizing().y})`,\n        p(radius),\n        input.type`range`\n          .min(0)\n          .max(100)\n          .value(radius)\n          .oninput((e) => radius(e.target.value))\n      )\n    );\n\n  const circleSVG = ({ c, handleRightClick }) =>\n    circle.cx(c.x).cy(c.y).r(c.r).fill`white`.stroke`black`\n      .onclick((e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      })\n      .oncontextmenu(handleRightClick);\n\n  const view = card(\n    { title: \"Circle Drawer\" },\n    div.class`wrapper`(\n      div.class`buttons`(\n        button.disabled(() => !step()).onclick(undo)(\"Undo\"),\n        button.disabled(() => step() === snapshots().length - 1).onclick(redo)(\n          \"Redo\"\n        )\n      ),\n      div.class`canvas`(\n        svg.onclick(addCircle)(() =>\n          present().map((c) => circleSVG({ c, handleRightClick }))\n        )\n      ),\n      () => resizing() && overlay()\n    )\n  );\n\n  return view;\n};\n","export let sampleData = {\n  A0: 'Data',\n  A1: '20',\n  A2: '15',\n  A3: 'text',\n  B1: '79',\n  B2: '3.9',\n  A5: 'Formula',\n  B5: 'Output',\n  A6: '\"=sum(D1:D5)\"',\n  B6: '=sum(D1:D5)',\n  A7: '\"=sub(A1:B2)\"',\n  B7: '=sub(A1:B2)',\n  A8: '\"=mul(D1:D5)\"',\n  B8: '=mul(D1:D5)',\n  A9: '\"=div(A1:B2)\"',\n  B9: '=div(A1:B2)',\n  A10: '\"=mod(A1:B2)\"',\n  B10: '=mod(A1:B2)',\n  C0: 'Formula',\n  D0: 'Output',\n  C1: '\"=sum(A1,A2)\"',\n  D1: '=sum(A1,A2)',\n  C2: '\"=sub(D1,A1)\"',\n  D2: '=sub(D1,A1)',\n  C3: '\"=mul(D2,A2)\"',\n  D3: '=mul(D2,A2)',\n  C4: '\"=div(D3,A1)\"',\n  D4: '=div(D3,A1)',\n  C5: '\"=mod(A1,A2)\"',\n  D5: '=mod(A1,A2)',\n  C7: '\"=sum(A1,A3)\"',\n  D7: '=sum(A1,A3)',\n  C8: '\"=sum(A1,A4)\"',\n  D8: '=sum(A1,A4)',\n  C9: '\"=sumA1,A4)\"',\n  D9: '=sumA1,A4)',\n  C10: '\"=sm(A1,A4)\"',\n  D10: '=sm(A1,A4)',\n  C11: '\"=sum(A1,307)\"',\n  D11: '=sum(A1,307)',\n  C12: '\"=sum(159,4)\"',\n  D12: '=sum(159,4)',\n  C14: '\"=A1\"',\n  D14: '=A1',\n  C15: '\"=A3\"',\n  D15: '=A3'\n}\n","import {subscribe} from 'sinuous/observable'\n\nexport class Parser {\n  constructor(store, columns, rows) {\n    this.cells = {}\n    this.store = store\n    this.columns = columns\n    this.rows = rows\n    this.operations = {\n      sum: (a, b) => a + b,\n      sub: (a, b) => a - b,\n      mul: (a, b) => a * b,\n      div: (a, b) => a / b,\n      mod: (a, b) => a % b,\n      exp: (a, b) => a ** b\n    }\n\n    subscribe(() => this.cells = this.store())\n  }\n\n  cartesianProduct(letters, numbers) {\n    var result = []\n    letters.forEach(letter => {\n      numbers.forEach(number => {\n        result.push(letter + number)\n      })\n    })\n    return result\n  }\n\n  findArrRange(arr, start, end) {\n    let startI = arr.indexOf(start)\n    let endI = arr.indexOf(end)\n    if (startI == -1 || endI == -1 || startI > endI) return []\n    return arr.slice(startI, endI + 1)\n  }\n\n  getRange(rangeStart, rangeEnd) {\n    rangeStart = this.splitOperand(rangeStart)\n    rangeEnd = this.splitOperand(rangeEnd)\n    let letters = this.findArrRange(this.columns, rangeStart[0], rangeEnd[0])\n    let numbers = this.findArrRange(this.rows, rangeStart[1], rangeEnd[1])\n    return this.cartesianProduct(letters, numbers)\n  }\n\n  splitOperand(operand) {\n    return [operand.match(/[a-zA-Z]+/)[0], Number(operand.match(/\\d+/)[0])]\n  }\n\n  rangeOperation(op, rangeStart, rangeEnd) {\n    if (!(this.isWellFormed(rangeStart) && this.isWellFormed(rangeEnd)))\n      return this.originalString\n\n    let range = this.getRange(rangeStart, rangeEnd)\n\n    return range\n      .map(address => Number(this.parse(this.cells[address]())))\n      .reduce(this.operations[op])\n  }\n\n  singleOperation(op, operand1, operand2) {\n    let first = this.parseOperand(operand1)\n    let second = this.parseOperand(operand2)\n\n    if (first === null || second === null) return this.originalString\n\n    return this.operations[op](first, second).toString()\n  }\n\n  isWellFormed(operand) {\n    return /[a-zA-Z]+\\d+/.test(operand)\n  }\n\n  parseOperand(operand) {\n    if (!isNaN(Number(operand))) return Number(operand)\n    if (operand in this.cells) return Number(this.parse(this.cells[operand]()))\n    if (this.isWellFormed(operand)) return 0\n\n    return null\n  }\n\n  parseOperation(op, formula) {\n    if (!(formula.startsWith('(') && formula.endsWith(')')))\n      return this.originalString\n\n    formula = formula.slice(1, formula.length - 1)\n\n    let operationType\n    let formulaArr\n    if (formula.includes(',')) {\n      operationType = 'single'\n      formulaArr = formula.split(',')\n    } else if (formula.includes(':')) {\n      operationType = 'range'\n      formulaArr = formula.split(':')\n    }\n\n    if (formulaArr.length !== 2) return this.originalString\n\n    if (operationType === 'single')\n      return this.singleOperation(op, formulaArr[0], formulaArr[1])\n\n    if (operationType === 'range')\n      return this.rangeOperation(op, formulaArr[0], formulaArr[1])\n\n    return this.originalString\n  }\n\n  parse(str) {\n    this.originalString = str\n    if (typeof str !== 'string') return ''\n    if (!str.startsWith('=')) return str\n\n    let formula = str.slice(1)\n    if (formula.slice(0, 3).toLowerCase() in this.operations) {\n      return this.parseOperation(\n        formula.slice(0, 3).toLowerCase(),\n        formula.slice(3).toUpperCase()\n      )\n    } else {\n      return this.cells[formula] || str\n    }\n  }\n}\n","import { o } from \"sinuous\";\nimport { sample, subscribe } from \"sinuous/observable\";\nimport { card } from \"../../components/card\";\nimport { sampleData } from \"./sampleData.js\";\nimport { Parser } from \"./parse.js\";\nimport {\n  div,\n  table,\n  thead,\n  tbody,\n  tr,\n  td,\n  input,\n  button,\n} from \"../../elements\";\n\nimport \"./cells.css\";\n\nconst LETTERS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nfunction range(n) {\n  return [...Array(n).keys()];\n}\nfunction letterRange(n) {\n  return range(n).map(getNumberAsLetters);\n}\nfunction getBase26(n) {\n  let result = [];\n  while (n > 25) {\n    let remainder = n % 26;\n    result.push(remainder);\n    n = Math.floor(n / 26) - 1;\n  }\n  result.push(n);\n  return result.reverse();\n}\nfunction getNumberAsLetters(n) {\n  let arr = getBase26(n);\n  return arr.map((num) => LETTERS[num]).join(\"\");\n}\nfunction findAdjacent(arr, value, direction) {\n  let index = arr.indexOf(value);\n  if (index === -1) return null;\n  if (direction === \"before\")\n    return arr[index - 1] === undefined ? null : arr[index - 1];\n  if (direction === \"after\") return arr[index + 1] || null;\n  return null;\n}\n\nexport const cells = (props) => {\n  let shape = (props && props.shape) || [100, 100];\n\n  Object.keys(sampleData).forEach((key) => {\n    // Make each entry an observable\n    sampleData[key] = o(sampleData[key]);\n  });\n  const data = o(sampleData);\n\n  const rows = range(shape[1]);\n  const columns = letterRange(shape[0]);\n  const p = new Parser(data, columns, rows);\n\n  let focused = o(undefined);\n  let tBody; // Used as a ref\n\n  function createNewCell(key) {\n    let dataRef = sample(data);\n    if (!dataRef[key]) {\n      dataRef[key] = o(\"\");\n      data(dataRef);\n    }\n  }\n\n  function handleFocus(key) {\n    if (focused() !== key) {\n      createNewCell(key);\n      focused(key);\n      let target = tBody.querySelector(\"#input-\" + key);\n      if (target) {\n        target.focus();\n        target.setSelectionRange(0, 9999);\n      }\n    }\n  }\n\n  function handleBlur(key) {\n    if (focused() === key) focused(undefined);\n  }\n\n  function handleInput(e, key) {\n    sample(data)[key](e.target.value);\n  }\n\n  function handleKeydown(e, column, row) {\n    // Navigate across the spreadsheet with arrow keys (and alt/option key)\n    let selector;\n    if (e.key === \"ArrowUp\") {\n      let newRow = findAdjacent(rows, row, \"before\");\n      selector = newRow !== null ? column + newRow : null;\n    }\n    if (e.key === \"ArrowDown\" || e.key === \"Enter\") {\n      let newRow = findAdjacent(rows, row, \"after\");\n      selector = newRow !== null ? column + newRow : null;\n    }\n    if (e.key === \"ArrowLeft\" && e.altKey) {\n      let newColumn = findAdjacent(columns, column, \"before\");\n      selector = newColumn !== null ? newColumn + row : null;\n    }\n    if (e.key === \"ArrowRight\" && e.altKey) {\n      let newColumn = findAdjacent(columns, column, \"after\");\n      selector = newColumn !== null ? newColumn + row : null;\n    }\n\n    if (selector) {\n      e.preventDefault();\n      handleFocus(selector);\n    }\n  }\n\n  function clear() {\n    data({});\n  }\n\n  const cellView = ({ j, i }) => {\n    let key = j + i;\n    let hasFocus = o(false);\n\n    subscribe(() => {\n      if (focused() === key && !sample(hasFocus)) {\n        hasFocus(true);\n      } else if (focused() !== key && sample(hasFocus)) {\n        hasFocus(false);\n      }\n    });\n\n    return () =>\n      hasFocus()\n        ? input\n            .id(\"input-\" + j + i)\n            .onfocus(() => handleFocus(j + i))\n            .onblur(handleBlur)\n            .onkeydown((e) => handleKeydown(e, j, i))\n            .oninput((e) => handleInput(e, j + i))\n            .value(() => {\n              return j + i in data()\n                ? focused() === j + i\n                  ? data()[j + i]()\n                  : p.parse(data()[j + i]())\n                : \"\";\n            })\n        : div(() => (key in data() ? p.parse(data()[key]()) : \"\"));\n  };\n\n  const view = card(\n    { title: \"Cells\" },\n    div.class`wrapper`(\n      table(\n        thead(\n          tr(td.class`row-key`, () =>\n            columns.map((column) => td.class`column-key`(column))\n          )\n        ),\n        tbody(() =>\n          rows.map((i) =>\n            tr.id(\"row-\" + i)(\n              td.class`row-key`(i),\n              columns.map((j) =>\n                td.id(j + i).onclick(() => handleFocus(j + i))(\n                  cellView({ j: j, i: i })\n                )\n              )\n            )\n          )\n        )\n      )\n    ),\n    button.onclick(clear)(\"Clear\")\n  );\n\n  tBody = view.querySelector(\"tbody\"); // Assign ref to domNode\n\n  return view;\n};\n","import { main, a } from \"./elements\";\nimport \"./app.css\";\n\nimport { counter } from \"./tasks/counter\";\nimport { temperatureConverter } from \"./tasks/temperatureConverter\";\nimport { flightBooker } from \"./tasks/flightBooker\";\nimport { timer } from \"./tasks/timer\";\nimport { crud } from \"./tasks/crud\";\nimport { circleDrawer } from \"./tasks/circleDrawer\";\nimport { cells } from \"./tasks/cells/cells\";\n\nexport const app = () => {\n  return main.class`App`(\n    a.href`../../index.html`(\"Home\"),\n    counter(),\n    temperatureConverter(),\n    flightBooker(),\n    timer(),\n    crud(),\n    circleDrawer(),\n    cells()\n  );\n};\n","import {app} from './app'\n\ndocument.querySelector('#root').append(app())"]}